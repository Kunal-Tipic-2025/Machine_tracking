import{r as x,b as f,u as y,j as e}from"./index-Cn-27-TL.js";import{p as b}from"./api-BUyL__Lx.js";import{u as v}from"./DefaultLayout-Vrb03iJh.js";import{a as E,b as L,d as h}from"./index.esm-2RRpQEeO.js";import{C as S,a as w}from"./CCardBody-Bfh-O-BQ.js";import{C as N}from"./CCardHeader-DyQDv_BY.js";import{C as B}from"./CForm-D5S3-WLx.js";import{C as l}from"./CFormLabel-CFBomnnz.js";import{C as u}from"./CFormInput-CL8d5WGe.js";import{C as k}from"./CFormSelect-BzqPV41T.js";import{C as F}from"./CFormTextarea-DOUqY1aU.js";import{C as A}from"./CFormCheck-Drk7w5bS.js";import"./cil-user-Dlmw-Gem.js";import"./RawMaterial-O4w4bCVl.js";import"./CNavItem-EvCITOBp.js";import"./CFormControlWrapper-CPiMjLs0.js";import"./CFormControlValidation-BvfkKe2L.js";const X=()=>{const[C,m]=x.useState(!1),{showToast:i}=f(),{t:s}=v("global"),j=y(),[a,d]=x.useState({name:"",slug:"",localName:"",expense_category:"",desc:"",show:!0}),c=r=>{const{name:t,value:n}=r.target;d({...a,[t]:n})},g=r=>{const{name:t,checked:n}=r.target;d({...a,[t]:n})},_=async r=>{const t=r.currentTarget;if(r.preventDefault(),r.stopPropagation(),m(!0),t.checkValidity()!==!0)return;let n={...a};n.slug=n.name.replace(/[^\w]/g,"_");try{const o=await b("/api/expenseType",n);o!=null&&o.id?(i("success",s("MSG.expense_type_added_successfully_msg")),j("/expense/new")):i("danger",s("MSG.failed_to_add_expense_type_msg")),p()}catch(o){i("danger","Error occured "+o)}},p=async()=>{d({name:"",slug:"",expense_category:"",localName:"",desc:"",show:!0}),m(!1)};return e.jsx(E,{children:e.jsx(L,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(N,{children:e.jsx("strong",{children:s("LABELS.create_new_expense_type")})}),e.jsx(w,{children:e.jsxs(B,{noValidate:!0,validated:C,onSubmit:_,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"pname",children:e.jsx("b",{children:s("LABELS.expense_type_name")})}),e.jsx(u,{type:"text",id:"pname",placeholder:"",name:"name",value:a.name,onChange:c,required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"pname",children:e.jsx("b",{children:s("LABELS.expense_type_local_name")})}),e.jsx(u,{type:"text",id:"plname",placeholder:"",name:"localName",value:a.localName,onChange:c,required:!0,feedbackInvalid:"Please provide local name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"expense_category",children:e.jsx("b",{children:s("LABELS.expense_category")})}),e.jsxs(k,{id:"expense_category",name:"expense_category",value:a.expense_category,onChange:c,required:!0,feedbackInvalid:"Please select an expense category.",children:[e.jsx("option",{value:"",children:"-- Select Category --"}),e.jsx("option",{value:"Machine Expense",children:"Machine Expense"}),e.jsx("option",{value:"Operator Expense",children:"Operator/Helper Expense"}),e.jsx("option",{value:"Other Expense",children:"Other Expense"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"desc",children:e.jsx("b",{children:s("LABELS.short_description")})}),e.jsx(F,{id:"desc",rows:3,name:"desc",value:a.desc,onChange:c,required:!0,feedbackInvalid:"Please provide description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(A,{id:"flexCheckDefault",label:s("LABELS.show_for_expense_records"),name:"show",checked:a.show,onChange:g})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(h,{color:"success",type:"submit",children:s("LABELS.submit")}),"Â ",e.jsx(h,{color:"secondary",onClick:p,children:s("LABELS.clear")})]})]})})]})})})};export{X as default};
