import{b as v,r as t,j as e}from"./index-DD5PpQvG.js";import{b,p as _}from"./api-BUyL__Lx.js";import{a as k,b as F,d as N,e as S}from"./DefaultLayout-CqqVRJ58.js";import{C as E}from"./CForm-DHMglVb5.js";import{C as u}from"./CFormLabel-nywbXjJ8.js";import{C as p}from"./CFormInput-Cn6Oxe7f.js";import{C as M}from"./CFormCheck-Zn8UkK2E.js";import{d as i}from"./index.esm-Cf16sf0V.js";const O=({visible:r,onClose:c,onSuccess:C,initialData:o=null})=>{const{showToast:l}=v(),[m,h]=t.useState(!1),[a,n]=t.useState({name:"",local_name:"",amount_deduct:!1});t.useEffect(()=>{r&&n(o?{name:o.name||"",local_name:o.local_name||"",amount_deduct:o.amount_deduct||!1,show:o.show!==void 0?!!o.show:!0}:{name:"",local_name:"",amount_deduct:!1,show:!0})},[r,o]);const d=s=>{const{name:f,value:x,type:j,checked:y}=s.target;n(w=>({...w,[f]:j==="checkbox"?y:x}))},g=async()=>{if(!a.name.trim()){l("danger","Name is required");return}try{h(!0);let s;o&&o.id?s=await b(`/api/charge-types/${o.id}`,a):s=await _("/api/charge-types",a),s&&s.id&&(l("success",`Charge type ${o?"updated":"created"}`),C(s),c())}catch(s){console.error("Error saving charge type:",s),l("danger","Failed to save charge type")}finally{h(!1)}};return e.jsxs(k,{visible:r,onClose:c,children:[e.jsx(F,{closeButton:!0,children:o&&o.id?"Edit Charge Type":"Add New Charge Type"}),e.jsx(N,{children:e.jsxs(E,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{children:"Name"}),e.jsx(p,{name:"name",value:a.name,onChange:d,placeholder:"e.g. Late Fee"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{children:"Local Name (Optional)"}),e.jsx(p,{name:"local_name",value:a.local_name,onChange:d,placeholder:"e.g. विलंब शुल्क"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(M,{id:"showCheck",name:"show",label:"Show in Invoice Selection?",checked:a.show,onChange:d}),e.jsx("small",{className:"text-muted",children:"Uncheck to disable this charge type locally without deleting it."})]})]})}),e.jsxs(S,{children:[e.jsx(i,{color:"secondary",variant:"outline",onClick:c,children:"Cancel"}),e.jsx(i,{color:"primary",onClick:g,disabled:m,children:m?"Saving...":"Save & Select"})]})]})};export{O as C};
