import{b as Pe,r as m,j as e}from"./index-Cn-27-TL.js";import{g as De,a as re,p as b,r as oe,c as $}from"./api-BUyL__Lx.js";import{g as ie}from"./companyPdf-BBxsCUq9.js";import{u as Fe,a as Ae,b as Ee,c as Re,d as ke,e as Me}from"./DefaultLayout-Vrb03iJh.js";import{a as Be,b as Ie,d as P}from"./index.esm-2RRpQEeO.js";import{C as Te,a as We}from"./CCardBody-Bfh-O-BQ.js";import{C as qe}from"./CCardHeader-DyQDv_BY.js";import{C as Oe}from"./CForm-D5S3-WLx.js";import{C as l}from"./CFormLabel-CFBomnnz.js";import{C as p}from"./CFormInput-CL8d5WGe.js";import{C}from"./CFormSelect-BzqPV41T.js";import{C as Ue}from"./RawMaterial-O4w4bCVl.js";import"./jspdf.es.min-C59mXbfK.js";import"./typeof-QjJsDpFa.js";import"./jspdf.plugin.autotable-DlXpEGqW.js";import"./TipicConsultech-B6_BeNSe.js";import"./cil-user-Dlmw-Gem.js";import"./CNavItem-EvCITOBp.js";import"./CFormControlWrapper-CPiMjLs0.js";import"./CFormControlValidation-BvfkKe2L.js";function ma(){const H=new Date,{showToast:o}=Pe(),Y=De(),D=1,B=new Date(H);B.setMonth(B.getMonth()+D);const V=Y.type,F=Y.id,[ze,I]=m.useState(null),[le,v]=m.useState(!1),[N,G]=m.useState(null),[ce,de]=m.useState([]),[me,pe]=m.useState(!1),[T,ue]=m.useState("");m.useEffect(()=>{const a=()=>{const n=navigator.userAgent,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),r=window.innerWidth<=768;pe(t||r)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]);const[s,y]=m.useState({companyName:"",companyId:"",land_mark:"",Tal:"",Dist:"",Pincode:"",phone_no:"",email_id:"",bank_name:"",account_no:"",IFSC:"",logo:"",sign:"",paymentQRCode:"",appMode:"advance",payment_mode:"online",subscribed_plan:1,duration:D,subscription_validity:B.toISOString().split("T")[0],refer_by_id:F,user_name:"Shop Owner",password:"",confirm_password:"",initials:"",next_plan_id:""}),{t:i}=Fe("global"),[j,he]=m.useState(""),[u,ye]=m.useState({plans:[],users:[]}),[S,Qe]=m.useState({phone_no:"",email_id:""}),[A,fe]=m.useState(!1),[E,_e]=m.useState(!1),W=a=>Math.round(a*5)/5,ge=a=>{var t;const n=((t=u.plans.find(r=>r.id==a))==null?void 0:t.price)||0;return W(n)},R=()=>{const a=new Date(s.subscription_validity),n=new Date,t=a.getFullYear()-n.getFullYear(),r=a.getMonth()-n.getMonth();let c=t*12+r;return a.getDate()<n.getDate()&&c--,Math.max(c,1)},w=()=>{var r;const a=((r=u.plans.find(c=>c.id==s.subscribed_plan))==null?void 0:r.price)||0,n=R(),t=a*n;return W(t)},k=()=>{const a=w()*.18;return W(a)},xe=a=>{const{value:n}=a.target;a.preventDefault(),a.stopPropagation();const t=new Date,r=parseInt(n);t.setMonth(t.getMonth()+r);const c=t.toISOString().split("T")[0];y({...s,duration:parseInt(n),subscription_validity:c})};m.useEffect(()=>{(async()=>{try{const n=await re("/api/detailsForCompany"),t=await re("/api/partnersCompany");ye(n||{plans:[],users:[]}),de(t||[])}catch(n){console.error("Error fetching reference data:",n),o("danger","Failed to load reference data")}})()},[]),m.useEffect(()=>{if(!window.Razorpay){const a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.onload=()=>console.log("Razorpay script loaded"),document.body.appendChild(a)}},[]);const Z=async()=>{try{let a={...s,logo:"invoice/jalseva.jpg",sign:"invoice/empty.png",paymentQRCode:"invoice/empty.png"};if(s.logo&&typeof s.logo=="object"){const n=new FormData;n.append("file",s.logo),n.append("dest","invoice");const t=await $("/api/fileUpload",n),r=t==null?void 0:t.fileName;r&&(a.logo=r)}if(s.sign&&typeof s.sign=="object"){const n=new FormData;n.append("file",s.sign),n.append("dest","invoice");const t=await $("/api/fileUpload",n),r=t==null?void 0:t.fileName;r&&(a.sign=r)}if(s.paymentQRCode&&typeof s.paymentQRCode=="object"){const n=new FormData;n.append("file",s.paymentQRCode),n.append("dest","invoice");const t=await $("/api/fileUpload",n),r=t==null?void 0:t.fileName;r&&(a.paymentQRCode=r)}if(s.subscribed_plan){const n=u.plans.find(t=>t.id==s.subscribed_plan);n&&n.name.toLowerCase().includes("free trial")?a.next_plan_id=s.next_plan_id:a.next_plan_id=s.subscribed_plan}return a}catch(a){return o("danger","Error uploading files: "+a.message),console.error("Error uploading files:",a),null}};m.useEffect(()=>{if(!j)return;const a=u.plans.find(n=>{var r;return(((r=n.name)==null?void 0:r.toLowerCase())||"").startsWith(j.toLowerCase())});if(a){const n=a.name.toLowerCase();let t=1;n.startsWith("annually")||n.startsWith("yearly")?t=12:n.startsWith("half-yearly")?t=6:n.startsWith("quarterly")?t=3:(n.startsWith("monthly")||n.startsWith("free trial"))&&(t=1);const r=new Date,c=new Date(r);c.setMonth(c.getMonth()+t),y(h=>({...h,subscribed_plan:a.id,duration:t,subscription_validity:c.toISOString().split("T")[0]}))}else y(n=>({...n,subscribed_plan:"",duration:1,subscription_validity:""}))},[j,u.plans]);const be=async()=>{var a;try{const n=await Z();if(!n){o("danger","Failed to prepare form data");return}I(n);try{await b("/api/company/check-duplicate",{email_id:n.email_id,phone_no:n.phone_no})}catch{o("danger","Email id or Mobile number is already taken");return}const t=await b("/api/companies",n);if((a=t==null?void 0:t.details)!=null&&a.company_id){o("success","Company Registration Successful!");const r={name:s.user_name||"Shop Owner",email:n.email_id,mobile:n.phone_no,password:s.password,password_confirmation:s.confirm_password,type:"1",company_id:t.details.company_id};try{await oe(r)?o("success","Default user created successfully."):o("danger","Company created but failed to create default user.")}catch(g){console.error("Error creating user:",g),o("danger","Company created but error while creating user.")}const c=u.plans.find(g=>g.id==n.subscribed_plan),h=new Date().toISOString().split("T")[0],L=R(),z=(c==null?void 0:c.price)||0,ae=L>0?z/L:0,_={company_id:t.details.company_id,plan_id:n.subscribed_plan,user_id:F,total_amount:w(),start_date:h,valid_till:n.subscription_validity,transaction_id:s.payment_mode==="cash"?"CASH_PAYMENT":"FREE_PLAN",transaction_status:s.payment_mode==="cash"?"cash_received":"success",payment_mode:s.payment_mode,renewal_type:"new_registration",plan:c,company:{company_name:n.companyName,phone_no:n.phone_no,email_id:n.email_id}};try{await b("/api/company-receipt",_)}catch(g){console.error("Receipt API error:",g)}G(_),v(!0),ee()}else o("danger","Company registration failed.")}catch(n){console.error("Registration error:",n),o("danger","Company registration failed: "+n.message)}},ve=async()=>{try{const a=await Z();if(!a){o("danger","Failed to prepare form data");return}I(a);try{await b("/api/company/check-duplicate",{email_id:a.email_id,phone_no:a.phone_no})}catch{o("danger","Email id or Mobile number is already taken");return}const n=u.plans.find(f=>f.id==a.subscribed_plan),t=w(),r=t-k(),c=k(),h=new Date().toISOString().split("T")[0],L=R(),z=(n==null?void 0:n.price)||0,ae=L>0?z/L:0,_=await b("/api/create-order",{amount:t});if(!_){o("danger","Technical issue: Could not create payment order");return}const g={key:_.key,amount:_.order.amount,currency:_.order.currency,order_id:_.order.id,name:"Nursery Seva",handler:async f=>{var te;const Q=await b("/api/verify-payment",{razorpay_order_id:f.razorpay_order_id,razorpay_payment_id:f.razorpay_payment_id,razorpay_signature:f.razorpay_signature});if(Q!=null&&Q.success)try{const x=await b("/api/company",a);if((te=x==null?void 0:x.details)!=null&&te.company_id){o("success","Company Registration Successful!");const Le={name:s.user_name||"Shop Owner",email:a.email_id,mobile:a.phone_no,password:s.password,password_confirmation:s.confirm_password,type:"1",company_id:x.details.company_id};try{await oe(Le)?o("success","Default user created successfully."):o("danger","Company created but failed to create default user.")}catch(M){console.error("User creation error:",M),o("danger","Company created but error while creating user.")}const se={company_id:x.details.company_id,plan_id:a.subscribed_plan,user_id:F,total_amount:t,start_date:h,price:ae,valid_till:a.subscription_validity,transaction_id:f.razorpay_payment_id,transaction_status:"success",payment_mode:"online",renewal_type:"new_registration",plan:n,company:{company_name:a.companyName,phone_no:a.phone_no,email_id:a.email_id}};try{await b("/api/company-receipt",se)}catch(M){console.error("Receipt save error:",M)}G(se),v(!0),ee()}else o("danger","Payment succeeded but company registration failed.")}catch(x){console.error("Company registration error:",x),o("danger","Payment was successful but company registration failed: "+x.message)}else o("info","Payment verification failed")},prefill:{name:a.companyName,email:a.email_id,contact:a.phone_no},theme:{color:"#3399cc"}},ne=new window.Razorpay(g);ne.open(),ne.on("payment.failed",f=>{console.error("Payment Failed:",f.error),o("danger","Payment failed. Company registration canceled.")})}catch(a){console.error("Payment process error:",a),o("danger","Something went wrong with payment: "+a.message)}};m.useEffect(()=>{if(!s.duration)return;const a=new Date,n=new Date(a);n.setMonth(n.getMonth()+parseInt(s.duration));const t=n.toISOString().split("T")[0];y(r=>({...r,subscription_validity:t}))},[s.duration]);const q=m.useRef(null),O=m.useRef(null),U=m.useRef(null),[je,K]=m.useState(!1),we=()=>{var t;const a=u.plans.find(r=>r.id==s.subscribed_plan),n=((t=a==null?void 0:a.name)==null?void 0:t.toLowerCase())||"";return n.includes("free trial")?[{label:"1 Month",value:1}]:n.includes("monthly")?[{label:"1 Month",value:1}]:n.includes("quarterly")?[{label:"3 Months",value:3}]:n.includes("half-yearly")?[{label:"6 Months",value:6}]:n.includes("annually")||n.includes("yearly")?[{label:"12 Months",value:12}]:[{label:"1 Month",value:1},{label:"3 Months",value:3},{label:"6 Months",value:6},{label:"12 Months",value:12}]},Ce=async()=>{try{if(!N){o("danger","Receipt data not available");return}const a=await X(N);if(!a)throw new Error("Failed to generate PDF blob");const n=new File([a],`Company-Receipt-${s.companyName.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,{type:"application/pdf"});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[n]}))try{await navigator.share({title:`Company Registration Receipt - ${s.companyName}`,text:`Company registration completed successfully for ${s.companyName}!`,files:[n]}),o("success","Receipt shared successfully");return}catch(t){console.log("Native share failed, falling back to manual method:",t)}J(n)}catch(a){console.error("Error in handleShareWhatsApp:",a),o("danger","Failed to share receipt: "+a.message)}},J=a=>{try{const n=URL.createObjectURL(a),t=document.createElement("a");t.href=n,t.download=a.name,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n);const c=`https://web.whatsapp.com/send?text=${encodeURIComponent(`Hello! Company registration for ${s.companyName} is completed successfully. Please find the receipt PDF attached.`)}`,h=window.open(c,"_blank","width=800,height=600");o("info","PDF downloaded! WhatsApp Web opened - select a contact and attach the downloaded PDF file."),setTimeout(()=>{h&&!h.closed&&o("info",'Instructions: 1) Select contact in WhatsApp 2) Click attachment icon 3) Choose "Document" 4) Select the downloaded PDF file')},3e3)}catch(n){console.error("Error in fallbackToWhatsAppWithContactSelector:",n),o("danger","Failed to open WhatsApp: "+n.message)}},Se=async()=>{try{if(!N){o("danger","Receipt data not available");return}const a=await X(N);if(!a)throw new Error("Failed to generate PDF blob");const n=new File([a],`Company-Receipt-${s.companyName.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,{type:"application/pdf"});if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){if(navigator.share)try{await navigator.share({title:`Company Registration Receipt - ${s.companyName}`,text:`Company registration completed successfully for ${s.companyName}!`,files:[n]}),o("success","Receipt shared successfully");return}catch(h){console.log("Mobile share failed:",h)}const t=encodeURIComponent(`Company registration for ${s.companyName} completed successfully! Receipt attached.`),r=URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.download=n.name,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r),window.location.href=`whatsapp://send?text=${t}`,o("info","PDF downloaded! WhatsApp opened - select contact and attach the PDF.")}else J(n)}catch(a){console.error("Error in handleShareWhatsAppMobile:",a),o("danger","Failed to share receipt: "+a.message)}},X=async a=>new Promise((n,t)=>{try{ie(a,"blob",r=>{r?n(r):t(new Error("Failed to generate PDF blob"))})}catch(r){t(r)}}),d=a=>{const{name:n,value:t,files:r}=a.target;r&&r.length>0?y({...s,[n]:r[0]}):y({...s,[n]:t})},ee=()=>{const a=new Date(H);a.setMonth(a.getMonth()+D),y({companyName:"",companyId:"",land_mark:"",Tal:"",Dist:"",Pincode:"",phone_no:"",email_id:"",bank_name:"",account_no:"",IFSC:"",logo:"",sign:"",paymentQRCode:"",appMode:"advance",subscribed_plan:1,duration:D,subscription_validity:a.toISOString().split("T")[0],refer_by_id:F,user_name:"Shop Owner",password:"",confirm_password:"",next_plan_id:""}),q.current&&(q.current.value=""),O.current&&(O.current.value=""),U.current&&(U.current.value=""),I(null),K(!1)},Ne=async a=>{const n=a.currentTarget;if(a.preventDefault(),a.stopPropagation(),K(!0),n.checkValidity()!==!0){o("danger","Kindly provide data of all required fields");return}if(!s.user_name||!s.password||!s.confirm_password){o("danger","Please fill all user fields.");return}if(s.password!==s.confirm_password){o("danger","Passwords do not match.");return}w()===0||s.payment_mode==="cash"?be():ve()};return e.jsxs(Be,{children:[e.jsx(Ie,{xs:12,children:e.jsxs(Te,{className:"mb-3",children:[e.jsx(qe,{children:e.jsx("strong",{children:i("LABELS.new_shop")})}),e.jsx(We,{children:e.jsxs(Oe,{noValidate:!0,validated:je,onSubmit:Ne,encType:"multipart/form-data",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"land_mark",children:i("LABELS.company_name")}),e.jsx(p,{type:"text",name:"companyName",id:"companyName",maxLength:"100",value:s.companyName,onChange:d,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"land_mark",children:i("LABELS.address_label")}),e.jsx(p,{type:"text",name:"land_mark",id:"land_mark",maxLength:"100",value:s.land_mark,onChange:d,feedbackInvalid:"Please provide shop address.",required:!0})]})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"Tal",children:i("LABELS.taluka")||"Taluka"}),e.jsx(p,{type:"text",name:"Tal",id:"Tal",maxLength:"50",value:s.Tal,onChange:d,feedbackInvalid:"Please provide taluka.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"Dist",children:i("LABELS.district")||"District"}),e.jsx(p,{type:"text",name:"Dist",id:"Dist",maxLength:"50",value:s.Dist,onChange:d,feedbackInvalid:"Please provide district.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"Pincode",children:i("LABELS.pincode")||"Pincode"}),e.jsx(p,{type:"text",name:"Pincode",id:"Pincode",maxLength:"6",minLength:"6",pattern:"[0-9]{6}",value:s.Pincode,onChange:d,feedbackInvalid:"Please provide valid 6-digit pincode.",required:!0})]})})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"phone_no",children:i("LABELS.mobile_number")}),e.jsx(p,{type:"text",name:"phone_no",id:"phone_no",value:s.phone_no,onChange:d,invalid:!!S.phone_no,feedbackInvalid:S.phone_no!=""?S.phone_no:"Please provide valid 10 digit mobile.",pattern:"\\d{10}",required:!0,minLength:10,maxLength:10})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"email_id",children:i("LABELS.email")}),e.jsx(p,{type:"email",name:"email_id",id:"email_id",invalid:!!S.email_id,value:s.email_id,onChange:d,feedbackInvalid:S.email_id!=""?S.email_id:"Please provide email address.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"initials",children:i("LABELS.initials")||"Initials"}),e.jsx(p,{type:"text",name:"initials",id:"initials",maxLength:"10",value:s.initials,onChange:d})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"bank_name",children:i("LABELS.bank_name")}),e.jsx(p,{type:"text",name:"bank_name",id:"bank_name",value:s.bank_name,onChange:d})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"account_no",children:i("LABELS.account_number")}),e.jsx(p,{type:"number",name:"account_no",id:"account_no",value:s.account_no,onChange:d})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"IFSC",children:i("LABELS.IFSC")}),e.jsx(p,{type:"text",name:"IFSC",id:"IFSC",value:s.IFSC,onChange:d})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"logo",children:i("LABELS.logo")}),e.jsx(p,{type:"file",name:"logo",id:"logo",accept:"image/png/jpeg",onChange:d,ref:q})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"sign",children:i("LABELS.sign")}),e.jsx(p,{type:"file",name:"sign",id:"sign",accept:"image/png/jpeg",onChange:d,ref:O})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"paymentQRCode",children:i("LABELS.qr_img")}),e.jsx(p,{type:"file",name:"paymentQRCode",id:"paymentQRCode",accept:"image/png/jpeg",onChange:d,ref:U})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"payment_mode",children:i("LABELS.payment_mode")||"Payment Mode"}),e.jsxs(C,{id:"payment_mode",name:"payment_mode",value:s.payment_mode,onChange:d,required:!0,children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"cash",children:"Cash"})]})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"billing_type",children:i("LABELS.billing_type")||"Billing Type"}),e.jsxs(C,{id:"billing_type",name:"billing_type",value:j,onChange:a=>{he(a.target.value),y(n=>({...n,subscribed_plan:"",next_plan_id:""}))},children:[e.jsx("option",{value:"",children:i("LABELS.free_trial")||"-- Free Trial --"}),e.jsx("option",{value:"monthly",children:i("LABELS.monthly")||"Monthly"}),e.jsx("option",{value:"quarterly",children:i("LABELS.quarterly")||"Quarterly"}),e.jsx("option",{value:"half-yearly",children:i("LABELS.half_yearly")||"Half-Yearly"}),e.jsx("option",{value:"annually",children:i("LABELS.annually")||"Annually"})]})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"subscribed_plan",children:i("LABELS.plan")}),e.jsx(C,{"aria-label":"Select Plan",value:s.subscribed_plan,id:"subscribed_plan",name:"subscribed_plan",onChange:d,required:!0,feedbackInvalid:"Select a plan.",options:u.plans.filter(a=>{var t;const n=((t=a.name)==null?void 0:t.toLowerCase())||"";return j?n.includes(j.toLowerCase()):n.includes("free trial")}).map(a=>({value:a.id,label:a.name}))})]})}),(V==0||V==3)&&e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"refer_by_id",children:i("LABELS.partner")}),e.jsxs(C,{"aria-label":"Select Partner",value:s.refer_by_id,id:"refer_by_id",name:"refer_by_id",onChange:d,required:!0,feedbackInvalid:"Select an application mode.",children:[e.jsx("option",{value:"",children:"-- Select Partner --"}),ce.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})})]}),j===""&&e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"next_billing_type",children:"Next Renewal Plan Type"}),e.jsxs(C,{id:"next_billing_type",name:"next_billing_type",value:T,onChange:a=>{ue(a.target.value),y(n=>({...n,next_plan_id:""}))},required:!0,children:[e.jsx("option",{value:"",children:i("LABELS.select_next_type")||"-- Select Type --"}),e.jsx("option",{value:"monthly",children:i("LABELS.monthly")||"Monthly"}),e.jsx("option",{value:"quarterly",children:i("LABELS.quarterly")||"Quarterly"}),e.jsx("option",{value:"half-yearly",children:i("LABELS.half_yearly")||"Half-Yearly"}),e.jsx("option",{value:"annually",children:i("LABELS.annually")||"Annually"})]})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"next_plan_id",children:"Next Renewal Plan"}),e.jsx(C,{id:"next_plan_id",name:"next_plan_id",value:s.next_plan_id||"",onChange:d,required:!0,options:u.plans.filter(a=>{var t;const n=((t=a.name)==null?void 0:t.toLowerCase())||"";return T&&n.includes(T.toLowerCase())&&!n.includes("free trial")}).map(a=>({value:a.id,label:a.name}))})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"duration",children:i("LABELS.plan_duration")}),e.jsx(C,{"aria-label":"Select duration",id:"duration",name:"duration",value:s.duration,options:we(),onChange:xe,required:!0,feedbackInvalid:"Select duration."})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"subscription_validity",children:i("LABELS.validity")}),e.jsx(p,{type:"date",id:"subscription_validity",name:"subscription_validity",value:s.subscription_validity,onChange:d,required:!0,readOnly:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-12",children:e.jsx("h5",{className:"mt-3 mb-2",children:"User Creation"})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"user_name",children:"User Name"}),e.jsx(p,{type:"text",name:"user_name",id:"user_name",value:s.user_name,onChange:d,required:!0,feedbackInvalid:"Please enter user name."})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3 position-relative",children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(p,{type:A?"text":"password",name:"password",id:"password",value:s.password,onChange:d,required:!0,feedbackInvalid:"Please enter password."}),e.jsx("span",{style:{position:"absolute",top:"38px",right:"10px",cursor:"pointer",fontSize:"1.2rem"},title:A?"Hide Password":"Show Password",onClick:()=>fe(!A),children:A?"ðŸ”“":"ðŸ‘ï¸"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3 position-relative",children:[e.jsx(l,{htmlFor:"confirm_password",children:"Confirm Password"}),e.jsx(p,{type:E?"text":"password",name:"confirm_password",id:"confirm_password",value:s.confirm_password,onChange:d,required:!0,feedbackInvalid:"Please confirm password."}),e.jsx("span",{style:{position:"absolute",top:"38px",right:"10px",cursor:"pointer",fontSize:"1.2rem"},title:E?"Hide Password":"Show Password",onClick:()=>_e(!E),children:E?"ðŸ”“":"ðŸ‘ï¸"})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs(Ue,{color:"success",children:[e.jsx("h4",{children:"Payment Details"}),"Amount (Per Month): ",ge(s.subscribed_plan),e.jsx("br",{}),"Number of months: ",R(),e.jsx("br",{}),"Total Amount: ",w()-k(),e.jsx("br",{}),"GST (18%): ",k(),e.jsx("br",{}),e.jsx("b",{children:"Final Payable Amount:"})," ",w()]})})}),e.jsx(P,{type:"submit",color:"primary",children:w()===0?i("LABELS.submit")||"Submit":i("LABELS.submit_pay")})]})})]})}),e.jsxs(Ae,{visible:le,onClose:()=>v(!1),children:[e.jsx(Ee,{children:e.jsx(Re,{children:"Company Registered Successfully!"})}),e.jsxs(ke,{children:[e.jsxs("p",{children:["Your company ",e.jsx("strong",{children:s.companyName})," has been registered successfully."]}),e.jsx("p",{children:"Choose how you'd like to save and share the receipt:"})]}),e.jsxs(Me,{children:[e.jsx(P,{color:"secondary",onClick:()=>v(!1),children:"Close"}),e.jsx(P,{color:"success",onClick:()=>{ie(N),v(!1)},children:"Save PDF Only"}),me?e.jsx(P,{color:"primary",onClick:()=>{Se(),v(!1)},children:"Share on WhatsApp"}):e.jsx(P,{color:"primary",onClick:()=>{Ce(),v(!1)},children:"Share via WhatsApp Web"})]})]})]})}export{ma as default};
