import{r as a,_ as U,R as D,g as M,f as Y,P,u as Z,b as J,j as e}from"./index-BaKPF3hP.js";import{C as K,a as R,b as h,c as f,d as g}from"./index.esm-CRoUjgbY.js";import{i as Q,l as X,k as ee,s as re}from"./api-BUyL__Lx.js";import{C as se,a as ae}from"./CCardBody-Bpstl35x.js";import{C as ne,a as L,b as I}from"./CNavItem-BvyDGrH6.js";import{C as te}from"./CForm-BXYYZIho.js";import{C as z}from"./CInputGroup-c1sy1IOI.js";import{C as E}from"./CInputGroupText-BhGEeTBd.js";import{c as oe,a as ie}from"./cil-user-Dlmw-Gem.js";import{C as T}from"./CFormInput-CSQWz8L4.js";import"./CFormControlWrapper-Cr88R6Rg.js";import"./CFormControlValidation-D8zRnrfC.js";import"./CFormLabel-iZrPyIV3.js";var b=a.forwardRef(function(c,l){var x=c.children,p=c.className,r=U(c,["children","className"]);return D.createElement("div",M({className:Y("card-group",p)},r,{ref:l}),x)});b.propTypes={children:P.node,className:P.string};b.displayName="CCardGroup";var le=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M336,113.375H176v144H56V296L255.8,496,456,296.007V257.375H336Zm81.361,176L255.826,450.746,94.616,289.375H208v-144h96v144Z' class='ci-primary'/><rect width='400' height='32' x='56' y='17.376' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const A="1.0.42_02_02_2026",ce=""+new URL("machBook-B03Li7jk.jpeg",import.meta.url).href,pe=""+new URL("jcb-wheel-loaders-C13i1Au4.jpg",import.meta.url).href,Se=()=>{const[c,l]=a.useState(!1),[x,p]=a.useState(!1),[r,F]=a.useState("customer"),[w,v]=a.useState(!1),t=Z(),d=a.useRef(),m=a.useRef(),{showToast:u}=J(),[y,V]=a.useState(!1),[de,W]=a.useState(!1),[me,_]=a.useState("");a.useState(""),a.useEffect(()=>{W(!1),_("")},[]),a.useEffect(()=>{Q()&&t("/worklog")},[]),window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),window.deferredPrompt=s,p(!0)});const[$,O]=a.useState(""),B=s=>{let o=s.target.value;/^\d*$/.test(o)&&o.length>10&&(o=o.slice(0,10)),O(o)},H=async()=>{if(window.deferredPrompt){window.deferredPrompt.prompt();const{outcome:s}=await window.deferredPrompt.userChoice;s==="accepted"&&(window.deferredPrompt=null,p(!1))}},q=async s=>{var k,S;const o=s.currentTarget;if(s.preventDefault(),s.stopPropagation(),o.checkValidity()!==!0){l(!0);return}l(!0),v(!0);const C=(k=d.current)==null?void 0:k.value,N=(S=m.current)==null?void 0:S.value;try{let n;if(r==="partner"?n=await X({email:C,password:N}):n=await ee({email:C,password:N}),n.blocked)u("danger",n.message);else{const i=(n==null?void 0:n.user)??(n==null?void 0:n.partner);if(i){const G={token:n.token,user:i};re(G),i.type===3?t("/company/new"):i.type===1?t("/dashboard"):i.type===2?t("/worklog"):i.type===0?t("/company/all"):i.type===4?t("/expense/new"):t("/dashboard")}else u("danger","Please provide valid email and password")}}catch(n){console.error("Login error:",n),u("danger","Please provide valid email and password")}finally{v(!1)}},j=s=>{F(s),l(!1),d.current&&(d.current.value=""),m.current&&(m.current.value="")};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${pe})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx(K,{fluid:!0,className:"px-3 px-sm-4",children:e.jsx(R,{className:"justify-content-center",children:e.jsx(h,{xs:12,sm:10,md:8,lg:6,xl:5,xxl:4,children:e.jsx(b,{children:e.jsx(se,{className:"p-0 shadow-lg border-0",style:{borderRadius:"20px",overflow:"hidden",backdropFilter:"blur(10px)",backgroundColor:"rgba(255, 255, 255, 0.95x`)"},children:e.jsxs(ae,{className:"p-3 p-sm-4 p-md-5",children:[e.jsxs("div",{className:"text-center mb-3 mb-sm-4",children:[e.jsx("img",{src:ce,style:{width:"clamp(80px, 15vw, 120px)",height:"auto",maxHeight:"120px",borderRadius:"15px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"},className:"object-fit-contain",alt:"Logo"}),e.jsx("h2",{className:"mt-3 mb-1",style:{fontWeight:"700",color:"#2c3e50",fontSize:"clamp(20px, 5vw, 28px)"},children:"Welcome Back"}),e.jsx("p",{className:"text-muted mb-0",style:{fontSize:"clamp(14px, 3vw, 16px)",fontWeight:"400"},children:"Please sign in to continue"})]}),e.jsx("div",{className:"mb-3 mb-sm-4",children:e.jsxs(ne,{variant:"pills",className:"justify-content-center p-1",style:{backgroundColor:"#f8f9fa",borderRadius:"15px",border:"1px solid #e9ecef"},children:[e.jsx(L,{style:{flex:1},children:e.jsxs(I,{active:r==="customer",onClick:()=>j("customer"),style:{cursor:"pointer",backgroundColor:r==="customer"?"#007bff":"transparent",color:r==="customer"?"white":"#6c757d",border:"none",borderRadius:"12px",padding:"clamp(8px, 2vw, 12px) clamp(12px, 3vw, 20px)",fontSize:"clamp(12px, 2.5vw, 15px)",fontWeight:"600",textAlign:"center",transition:"all 0.3s ease",boxShadow:r==="customer"?"0 2px 8px rgba(0, 123, 255, 0.3)":"none"},className:`${r==="customer"?"":"hover-effect"} d-flex align-items-center justify-content-center`,children:[e.jsx("span",{className:"d-none d-sm-inline",children:"ðŸ‘¤ Customer Login"}),e.jsx("span",{className:"d-inline d-sm-none",children:"ðŸ‘¤ Customer"})]})}),e.jsx(L,{style:{flex:1},children:e.jsxs(I,{active:r==="partner",onClick:()=>j("partner"),style:{cursor:"pointer",backgroundColor:r==="partner"?"#28a745":"transparent",color:r==="partner"?"white":"#6c757d",border:"none",borderRadius:"12px",padding:"clamp(8px, 2vw, 12px) clamp(12px, 3vw, 20px)",fontSize:"clamp(12px, 2.5vw, 15px)",fontWeight:"600",textAlign:"center",transition:"all 0.3s ease",boxShadow:r==="partner"?"0 2px 8px rgba(40, 167, 69, 0.3)":"none"},className:`${r==="partner"?"":"hover-effect"} d-flex align-items-center justify-content-center`,children:[e.jsx("span",{className:"d-none d-sm-inline",children:"ðŸ¤ Partner Login"}),e.jsx("span",{className:"d-inline d-sm-none",children:"ðŸ¤ Partner"})]})})]})}),e.jsxs(te,{noValidate:!0,onSubmit:q,children:[e.jsxs("div",{className:"text-center mb-3 mb-sm-4",children:[e.jsxs("p",{className:"mb-0",style:{color:r==="partner"?"#28a745":"#007bff",fontSize:"clamp(14px, 3vw, 16px)",fontWeight:"500"},children:[e.jsx("span",{className:"d-none d-sm-inline",children:r==="partner"?"ðŸ¢ Onboarding Partner Access":"ðŸ›ï¸ Customer Portal Access"}),e.jsx("span",{className:"d-inline d-sm-none",children:r==="partner"?"ðŸ¢ Partner":"ðŸ›ï¸ Customer"})]}),e.jsx("small",{className:"text-muted d-none d-sm-block",style:{fontSize:"clamp(12px, 2.5vw, 14px)"},children:r==="partner"?"Access your partner dashboard and tools":"Manage your account and orders"})]}),e.jsxs(z,{className:"mb-3",style:{borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx(E,{style:{backgroundColor:r==="partner"?"#28a745":"#007bff",color:"white",border:"none",padding:"clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 15px)"},children:e.jsx(f,{icon:oe})}),e.jsx(T,{ref:d,id:"username",placeholder:`Enter your ${r==="partner"?"partner":"customer"} email or mobile number`,autoComplete:"username",feedbackInvalid:"Please provide a valid email address or mobile number.",required:!0,value:$,onChange:B,style:{border:"none",padding:"clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 15px)",fontSize:"clamp(14px, 3vw, 15px)"}})]}),e.jsxs(z,{className:"mb-3 mb-sm-4 position-relative",style:{borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx(E,{style:{backgroundColor:r==="partner"?"#28a745":"#007bff",color:"white",border:"none",padding:"clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 15px)"},children:e.jsx(f,{icon:ie})}),e.jsx(T,{ref:m,id:"password",type:y?"text":"password",placeholder:"Enter your password",autoComplete:"current-password",feedbackInvalid:"Please provide a valid password.",required:!0,style:{border:"none",padding:"clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 15px)",paddingRight:"clamp(40px, 8vw, 50px)",fontSize:"clamp(14px, 3vw, 15px)"}}),e.jsx("button",{type:"button",onClick:()=>V(s=>!s),style:{position:"absolute",top:"50%",right:"clamp(12px, 3vw, 15px)",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",zIndex:10,fontSize:"clamp(16px, 4vw, 18px)",color:"#6c757d"},children:y?"ðŸ”’":"ðŸ‘ï¸"})]}),e.jsxs(R,{className:"align-items-center gy-2 gy-sm-0",children:[e.jsx(h,{xs:12,sm:7,md:6,className:"mb-2 mb-sm-0",children:e.jsx(g,{color:r==="partner"?"success":"primary",type:"submit",className:"w-100",disabled:w,style:{padding:"clamp(10px, 2.5vw, 12px) clamp(16px, 4vw, 24px)",fontSize:"clamp(14px, 3vw, 16px)",fontWeight:"600",borderRadius:"12px",border:"none",boxShadow:`0 4px 15px rgba(${r==="partner"?"40, 167, 69":"0, 123, 255"}, 0.3)`,transition:"all 0.3s ease"},children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"d-none d-sm-inline",children:"Logging In..."}),e.jsx("span",{className:"d-inline d-sm-none",children:"Logging..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"d-none d-sm-inline",children:"ðŸ” Login"}),e.jsx("span",{className:"d-inline d-sm-none",children:"ðŸ” Logging in"})]})})}),e.jsx(h,{xs:12,sm:5,md:6,className:"text-center text-sm-end",children:e.jsx(g,{color:"link",className:"px-0 text-decoration-none w-100 w-sm-auto",onClick:()=>t("/sendEmailForResetLink"),style:{color:"#6c757d",fontSize:"clamp(12px, 2.5vw, 14px)",fontWeight:"500"},children:"ðŸ”‘ Forgot Password?"})})]})]})]})})})})})}),x&&e.jsx(g,{onClick:H,color:"success",style:{position:"fixed",top:"clamp(15px, 4vw, 20px)",right:"clamp(15px, 4vw, 20px)",borderRadius:"50%",width:"clamp(50px, 12vw, 60px)",height:"clamp(50px, 12vw, 60px)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.3)",border:"none",zIndex:1e3},children:e.jsx(f,{icon:le,style:{fontSize:"clamp(18px, 5vw, 24px)",color:"white"}})}),e.jsxs("div",{style:{position:"fixed",bottom:"15px",right:"15px",fontSize:"12px",color:"#6c757d",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"6px 12px",borderRadius:"15px",border:"1px solid rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",zIndex:1e3,fontFamily:"monospace",userSelect:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease"},title:`Application Version: v${A}`,children:["v",A]}),e.jsx("style",{jsx:!0,children:`
        .hover-effect:hover {
          background-color: rgba(108, 117, 125, 0.1) !important;
          transform: translateY(-1px);
        }
        
        /* Additional responsive styles */
        @media (max-width: 576px) {
          .min-vh-100 {
            padding: 10px 0;
          }
        }
        
        @media (max-width: 400px) {
          .min-vh-100 {
            padding: 5px 0;
          }
        }
        
        /* Ensure proper touch targets on mobile */
        @media (max-width: 768px) {
          button, .btn {
            min-height: 44px;
          }
          
          input {
            min-height: 44px;
          }
        }
      `})]})};export{Se as default};
