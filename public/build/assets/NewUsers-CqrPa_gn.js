import{r as s,u as V,b as B,j as e}from"./index-DD5PpQvG.js";import{C as G,a as M,b as z,c,d as H}from"./index.esm-Cf16sf0V.js";import{g as J,a as K,r as O}from"./api-BUyL__Lx.js";import{C as Q,a as W}from"./CCardBody-DIaUAcaG.js";import{C as X}from"./CCardHeader-xDb1sBm5.js";import{C as Y}from"./CForm-DHMglVb5.js";import{C as l}from"./CInputGroup-CSjvk1Va.js";import{C as o}from"./CInputGroupText-3BZXwTrk.js";import{c as Z}from"./cib-amazon-pay-kD6VdHHX.js";import{C as U}from"./CFormSelect-BN9mb7wv.js";import{c as $}from"./cil-people-DQU-yEHN.js";import{c as ee,a as k}from"./cil-user-Dlmw-Gem.js";import{C as i}from"./CFormInput-Cn6Oxe7f.js";import{c as ae}from"./RawMaterial-BpBLObvv.js";import"./CFormControlWrapper-BZBLkUPy.js";import"./CFormControlValidation-CeKcElbP.js";import"./CFormLabel-nywbXjJ8.js";const je=()=>{const[T,E]=s.useState(!1),[_,f]=s.useState([]);V();const x=s.useRef(),v=s.useRef(),b=s.useRef(),h=s.useRef(),j=s.useRef(),[q,A]=s.useState(!1),[L,D]=s.useState(!1),u=s.useRef(),p=s.useRef(),{showToast:n}=B();let d=[];const m=J();m.type===0?d=[{label:"Select User Type ",value:""},{label:"Super Admin",value:"0"},{label:"Admin",value:"1"},{label:"User",value:"2",disabled:!1}]:m.type===1?d=[{label:"Select User Type ",value:""},{label:"Admin",value:"1"},{label:"User",value:"2",disabled:!1}]:d=[{label:"Select User Type ",value:""},{label:"User",value:"2",disabled:!1}],s.useEffect(()=>{try{K("/api/companies").then(a=>{if(a!=null&&a.length){const t=a.map(r=>({label:r.company_name,value:r.company_id}));m.type===0?f(t):f(t.filter(r=>r.value===m.company_id))}})}catch(a){n("danger","Error occured "+a)}},[]);const C=(a,t=!1)=>{const r=parseInt(t?p.current.value:u.current.value,10);t?D(!(r>0)):A(![0,1,2].includes(r))},F=async a=>{var y,w,I,g,S,N,R;if(a.preventDefault(),a.stopPropagation(),a.currentTarget.checkValidity()===!1){E(!0);return}const r={name:(y=x.current)==null?void 0:y.value,email:(w=v.current)==null?void 0:w.value,mobile:(I=b.current)==null?void 0:I.value,password:(g=h.current)==null?void 0:g.value,password_confirmation:(S=j.current)==null?void 0:S.value,type:(N=u.current)==null?void 0:N.value,company_id:(R=p.current)==null?void 0:R.value};try{await O(r)?n("success","New user is created succesfully"):n("danger","Error occured, please try again later.")}catch(P){n("danger","Error occured "+P)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row ",children:e.jsx(G,{children:e.jsx(M,{className:"justify-content-center",children:e.jsx(z,{md:9,lg:12,xl:12,children:e.jsxs(Q,{className:"mx-6",children:[e.jsx(X,{children:e.jsx("strong",{children:"Create User "})}),e.jsx(W,{className:"p-4",children:e.jsxs(Y,{noValidate:!0,validated:T,onSubmit:F,children:[e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:e.jsx(c,{icon:Z})}),e.jsx(U,{onChange:a=>C(a,!0),"aria-label":"Select Shop / Company",ref:p,invalid:L,options:_,feedbackInvalid:"Select Shop / Company"})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:e.jsx(c,{icon:$})}),e.jsx(U,{onChange:C,"aria-label":"Default select example",ref:u,invalid:q,options:d,feedbackInvalid:"Please select a valid option."})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:e.jsx(c,{icon:ee})}),e.jsx(i,{ref:x,type:"username",placeholder:"Username",autoComplete:"name",required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:"@"}),e.jsx(i,{ref:v,placeholder:"Email",autoComplete:"email",type:"email",required:!0,feedbackInvalid:"Please provide email."})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:e.jsx(c,{icon:ae})}),e.jsx(i,{ref:b,placeholder:"Mobile",autoComplete:"phone",type:"mobile",required:!0,feedbackInvalid:"Please provide mobile number."})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:e.jsx(c,{icon:k})}),e.jsx(i,{type:"password",ref:h,placeholder:"Enter New Password",autoComplete:"new-password",required:!0,feedbackInvalid:"Please provide password."})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:e.jsx(c,{icon:k})}),e.jsx(i,{ref:j,type:"password",placeholder:"Confirm  password",autoComplete:"new-password",required:!0,feedbackInvalid:"Please provide confirm password."})]}),e.jsx("div",{className:"d-grid col-sm-3",children:e.jsx(H,{color:"success",type:"submit",children:"Save"})})]})})]})})})})})};export{je as default};
