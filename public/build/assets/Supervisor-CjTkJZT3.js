import{r as t,b as Es,j as e,C as ks}from"./index-BTeA492D.js";import{C as Rs,a as Ts,b as Ds,d as C,c as S}from"./index.esm-UVM2W3HN.js";import{g as Os,a as K,d as zs,r as $s,b as V}from"./api-BUyL__Lx.js";import{C as Us}from"./ConfirmationModal-DoRO_i4n.js";import{C as Ls,a as Hs}from"./CCardBody-BDPTx9XL.js";import{C as qs}from"./CCardHeader-7X8EpRUb.js";import{C as Fs,a as Vs,b as Xe,c as h,d as Bs,e as x}from"./CTable-Dlaw-9GH.js";import{a as We,b as Je,e as Ke,c as Qe,d as es}from"./DefaultLayout-1THlq5Yf.js";import{C as Ys}from"./CForm-DLTIQo7N.js";import{C as p}from"./CInputGroup-CO3LbqLS.js";import{C as m}from"./CInputGroupText-DcS059QV.js";import{c as Zs}from"./cib-amazon-pay-kD6VdHHX.js";import{C as Q}from"./CFormSelect-B_ay71cr.js";import{c as Gs}from"./cil-people-DQU-yEHN.js";import{c as ss}from"./cil-money-Dk3vHnQB.js";import{C as o}from"./CFormInput-C-f2xD8x.js";import{c as Xs,a as as}from"./cil-user-Dlmw-Gem.js";import{c as Ws}from"./RawMaterial-DvMRSoFa.js";import{C as Js}from"./CTooltip-B3pAPlfK.js";import"./CNavItem-Dms8XRKU.js";import"./CFormControlWrapper-B0MocaRk.js";import"./CFormControlValidation-CspEyxkQ.js";import"./CFormLabel-N-ZSSVsb.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";const Ca=()=>{var Ve,Be;const[rs,je]=t.useState([]),[ts,be]=t.useState(!1),[ls,B]=t.useState(!1),[l,A]=t.useState(null),[ee,Ce]=t.useState(!1),[is,Se]=t.useState([]),[d,ns]=t.useState([]),[os,ds]=t.useState([]),[D,se]=t.useState([]),[we,cs]=t.useState([]),[ps,ae]=t.useState(!1),[ms,us]=t.useState(null),[g,Y]=t.useState({adds:[],removes:[]}),[Z,Ne]=t.useState(!1),[G,Pe]=t.useState(!1),[Ae,re]=t.useState(!1),[fs,Ie]=t.useState(!0),[Me,te]=t.useState(!1),[le,ie]=t.useState(!1),[ne,oe]=t.useState(!1),[_e,Ee]=t.useState(!1),[ke,Re]=t.useState(!1),[hs,de]=t.useState(""),[xs,ce]=t.useState(""),[gs,pe]=t.useState(""),[vs,me]=t.useState(""),[u,Te]=t.useState(""),[ue,v]=t.useState(!1),[De,y]=t.useState(""),[Oe,fe]=t.useState(!1),[ys,he]=t.useState(""),O=t.useRef(),I=t.useRef(),z=t.useRef(),M=t.useRef(),_=t.useRef(),$=t.useRef(),U=t.useRef(),f=t.useRef(),E=t.useRef(),{showToast:n}=Es(),w=Os();let L=[];w.type===0?L=[{label:"Select User Type ",value:""},{label:"Super Admin",value:"0"},{label:"Admin",value:"1"},{label:"User",value:"2",disabled:!1}]:w.type===1?L=[{label:"Select User Type ",value:""},{label:"Admin",value:"1"},{label:"Operator",value:"2",disabled:!1},{label:"Helper",value:"4",disabled:!1}]:L=[{label:"Select User Type ",value:""},{label:"User",value:"2",disabled:!1}];const js=s=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s),bs=s=>s.replace(/\D/g,"").length===10,Cs=s=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(s),ze=()=>{var a;const s=((a=I.current)==null?void 0:a.value)||"";s&&!js(s)?(re(!0),de("Please enter a valid email address")):(re(!1),de(""))},$e=()=>{var a;const s=((a=z.current)==null?void 0:a.value)||"";s&&!bs(s)?(te(!0),ce("Please enter exactly 10 digits")):(te(!1),ce(""))},Ue=()=>{var a;(((a=E.current)==null?void 0:a.value)||"").trim().length===0?(fe(!0),he("Please enter Address")):(fe(!1),he(""))},xe=()=>{var a;const s=((a=f.current)==null?void 0:a.value)||"";u===2?!s||s.trim()===""?(v(!0),y("Payment per month is required for Operator")):parseInt(s)<=0?(v(!0),y("Payment must be greater than 0")):(v(!1),y("")):u===4?!s||s.trim()===""?(v(!0),y("Payment per month is required for Helper")):parseInt(s)<=0?(v(!0),y("Payment must be greater than 0")):(v(!1),y("")):(v(!1),y(""))},Le=()=>{var a,r;const s=((a=M.current)==null?void 0:a.value)||"";s&&!Cs(s)?(ie(!0),pe("Password must be at least 8 characters with uppercase, lowercase, number and special character")):(ie(!1),pe("")),(r=_.current)!=null&&r.value&&ge()},ge=()=>{var r,i;const s=((r=M.current)==null?void 0:r.value)||"",a=((i=_.current)==null?void 0:i.value)||"";a&&s!==a?(oe(!0),me("Passwords do not match")):(oe(!1),me(""))},X=(s,a=!1)=>{const r=parseInt(a?U.current.value:$.current.value,10);a?Re(!(r>0)):(Ee(![0,1,2,3,4].includes(r)),Te(r))},ve=async()=>{try{const s=await K("/api/machine-operators");ns(s||[])}catch(s){console.error("Error fetching machines:",s),n("danger","Error fetching machines")}},He=async()=>{try{const s=await K("/api/myProjects");ds(s||[])}catch(s){console.error("Error fetching projects:",s)}};t.useEffect(()=>{K("/api/companies").then(s=>{if(s!=null&&s.length){const a=s.map(r=>({label:r.company_name,value:r.company_id}));w.type===0?Se(a):Se(a.filter(r=>r.value===w.company_id))}}).catch(s=>n("danger","Error: "+s))},[]);const W=async()=>{try{Ie(!0);const s=await K("/api/appUsers");let a=[];s!=null&&s.data&&Array.isArray(s.data)&&(a=s.data.filter(r=>String(r.company_id)===String(w.company_id))),je(a)}catch(s){console.error("Error fetching operators:",s),n("danger","Error fetching operators: "+s.message),je([])}finally{Ie(!1)}};t.useEffect(()=>{W(),ve(),He()},[]);const Ss=()=>{O.current&&(O.current.value=""),I.current&&(I.current.value=""),z.current&&(z.current.value=""),M.current&&(M.current.value=""),_.current&&(_.current.value=""),$.current&&($.current.value=""),U.current&&(U.current.value=""),f.current&&(f.current.value=""),E.current&&(E.current.value=""),Ce(!1),Ee(!1),Re(!1),re(!1),te(!1),ie(!1),oe(!1),de(""),ce(""),pe(""),me(""),Ne(!1),Pe(!1),se([]),cs([]),Te(""),v(!1),y(""),fe(!1),he("")},ye=()=>{be(!1),Ss()},ws=s=>{us(s),ae(!0)},Ns=async()=>{try{await zs(`/api/appUsers/delete/${ms.id}`),n("success","User deleted successfully."),ae(!1),W()}catch(s){console.error("Error deleting user:",s),n("danger","Failed to delete user!")}},qe=async s=>{var i,k,J,j,c,H,R,b,Ye,Ze,Ge;s.preventDefault(),s.stopPropagation();const a=s.currentTarget;if(Ce(!0),ze(),$e(),Le(),ge(),X(null,!1),X(null,!0),xe(),Ue(),a.checkValidity()===!1||Ae||Me||le||ne||_e||ke||ue||Oe){n("danger","Please check All Fields before submitting");return}const r={name:(i=O.current)==null?void 0:i.value.trim(),email:(k=I.current)==null?void 0:k.value.trim(),mobile:(J=z.current)==null?void 0:J.value.trim(),password:(j=M.current)==null?void 0:j.value,password_confirmation:(c=_.current)==null?void 0:c.value,type:(H=$.current)==null?void 0:H.value,company_id:(R=U.current)==null?void 0:R.value};u===2&&((b=f.current)!=null&&b.value)&&(r.payment_per_hour=f.current.value),u===4&&((Ye=f.current)!=null&&Ye.value)&&(r.payment_per_hour=f.current.value),(Ze=E.current)!=null&&Ze.value&&(r.address=E.current.value.trim());try{const q=await $s(r);if(q.id){const T=q.id||((Ge=q.data)==null?void 0:Ge.id);if(D.length>0&&T)for(const F of D){const N=d.find(P=>P.id===parseInt(F));if(N){const P=Array.isArray(N.operator_id)?[...new Set([...N.operator_id.map(String),String(T)])]:[String(T)];await V(`/api/machine-operators/${F}`,{operator_id:P})}}if(we.length>0&&T)for(const F of we){const N=os.find(P=>P.id===parseInt(F));if(N){const P=Array.isArray(N.operator_id)?[...new Set([...N.operator_id.map(String),String(T)])]:[String(T)];await V(`/api/projects/${F}`,{operator_id:P})}}const _s=r.type==="2";n("success",_s?"New operator created and assigned successfully":"New supervisor created successfully"),r.type==="4"&&n("success","New Helper created successfully"),ye(),W(),ve(),He()}else n("danger","Error occurred, please try again later.")}catch(q){n("danger",q.message)}},Ps=s=>{A(s),B(!0),Y({adds:[],removes:[]})},As=s=>{if(!s||!l)return;const a=d.find(i=>i.id===parseInt(s));if(!a)return;if(Array.isArray(a.operator_id)&&a.operator_id.map(String).includes(String(l.id))){n("warning","Machine already assigned");return}Y(i=>({...i,adds:[...new Set([...i.adds,s])],removes:i.removes.filter(k=>k!==s)}))},Is=/^[6-9]\d{9}$/,Ms=async()=>{var a;if(!l)return;const s=((a=l.mobile)==null?void 0:a.replace(/\D/g,""))??"";if(!Is.test(s)){n("danger","Please enter a valid 10-digit mobile number starting with 6, 7, 8 or 9.");return}try{const r={id:l.id,name:l.name,email:l.email,mobile:s,type:l.type,company_id:l.company_id||w.company_id,company_id:l.company_id||w.company_id,blocked:l.blocked??0};l.type===2&&l.payment&&(r.payment_per_hour=l.payment),l.type===4&&l.payment&&(r.payment_per_hour=l.payment);const i=await V(`/api/userUpdated/${l.id}`,r);if(!(i!=null&&i.success)){n("danger",(i==null?void 0:i.message)||"Update failed");return}const k=g.adds.map(async j=>{const c=d.find(b=>b.id===parseInt(j));if(!c)return;const H=Array.isArray(c.operator_id)?c.operator_id.map(String):[],R=[...new Set([...H,String(l.id)])];await V(`/api/machine-operators/${j}`,{operator_id:R})}),J=g.removes.map(async j=>{const c=d.find(b=>b.id===parseInt(j));if(!c)return;const R=(Array.isArray(c.operator_id)?c.operator_id.map(String):[]).filter(b=>b!==String(l.id));await V(`/api/machine-operators/${j}`,{operator_id:R})});await Promise.all([...k,...J]),n("success","Operators updated successfully"),B(!1),Y({adds:[],removes:[]}),await Promise.all([W(),ve()])}catch(r){console.error("Error in handleUpdate:",r),n("danger",`Error updating operators: ${r.message}`)}},Fe=({children:s,maxLength:a=8})=>{const r=String(s||"").trim();if(r.length<=a)return e.jsx(e.Fragment,{children:r});const i=r.substring(0,a)+"...";return e.jsx(Js,{content:r,placement:"top",children:e.jsx("span",{style:{cursor:"pointer"},children:i})})};return fs?e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{minHeight:"400px"},children:[e.jsx(ks,{color:"primary",size:"lg"}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading Operators..."})]}):e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-column",children:[e.jsx(Rs,{children:e.jsx(Ts,{className:"justify-content-center",children:e.jsx(Ds,{md:12,lg:12,xl:12,children:e.jsxs(Ls,{children:[e.jsxs(qs,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Operators List"}),e.jsx(C,{color:"danger",onClick:()=>be(!0),className:"text-white",children:"Add New Operator"})]}),e.jsx(Hs,{children:e.jsx("div",{className:"table-responsive",style:{width:"100%",overflowX:"auto",overflowY:"auto",border:"1px solid #dee2e6",borderRadius:"8px",backgroundColor:"#fff"},children:e.jsxs(Fs,{hover:!0,striped:!0,bordered:!0,color:"light",className:"mb-0",children:[e.jsx(Vs,{style:{position:"sticky",top:0,backgroundColor:"#f8f9fa",zIndex:10},children:e.jsxs(Xe,{children:[e.jsx(h,{className:"text-center align-middle",children:"SR. NO."}),e.jsx(h,{className:"text-center align-middle",children:"Name"}),e.jsx(h,{className:"text-center align-middle",children:"Email"}),e.jsx(h,{className:"text-center align-middle",children:"Mobile"}),e.jsx(h,{className:"text-center align-middle",children:"Address"}),e.jsx(h,{className:"text-center align-middle",children:"Type"}),e.jsx(h,{className:"text-center align-middle",children:"Payment"}),e.jsx(h,{className:"text-center align-middle",children:"Machines"}),e.jsx(h,{className:"text-center align-middle",children:"Action"})]})}),e.jsx(Bs,{children:rs.map((s,a)=>{const r=d.filter(i=>Array.isArray(i.operator_id)&&i.operator_id.map(String).includes(String(s.id)));return console.log("User : ",s),e.jsxs(Xe,{children:[e.jsx(x,{children:a+1}),e.jsx(x,{children:s.name}),e.jsx(x,{children:e.jsx(Fe,{children:s.email})}),e.jsx(x,{children:s.mobile}),e.jsx(x,{children:s.address}),e.jsx(x,{children:s.type===0?"Super Admin":s.type===1?"Admin":s.type===2?"Operator":"Helper"}),e.jsx(x,{children:s.payment}),e.jsx(x,{children:e.jsx(Fe,{children:r.length>0?r.map(i=>i.machine_name).join(", "):"-"})}),e.jsxs(x,{className:"d-flex gap-2 justify-content-center",children:[e.jsx(C,{size:"sm",color:"info",className:"text-white",onClick:()=>Ps(s),children:"Edit"}),e.jsx(C,{color:"danger",size:"sm",onClick:()=>ws(s),children:"Delete"})]})]},s.id)})})]})})})]})})})}),e.jsxs(We,{visible:ts,onClose:ye,backdrop:"static",keyboard:!1,size:"lg",children:[e.jsx(Je,{closeButton:!0,children:e.jsx(Ke,{children:"Add New Operator"})}),e.jsx(Qe,{children:e.jsxs(Ys,{noValidate:!0,validated:ee,onSubmit:qe,children:[e.jsxs(p,{className:"mb-4",children:[e.jsx(m,{children:e.jsx(S,{icon:Zs})}),e.jsx(Q,{onChange:s=>X(s,!0),"aria-label":"Select Shop / Company",ref:U,invalid:ke,options:is,feedbackInvalid:"Select Shop / Company",disabled:!0})]}),e.jsxs("div",{className:`d-flex ${u===2?"gap-3":""} mb-3 flex-wrap`,children:[e.jsx("div",{className:`${u===2?"flex-fill":"w-100"}`,children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:Gs})}),e.jsx(Q,{onChange:X,"aria-label":"Select user type",ref:$,invalid:_e,options:L,feedbackInvalid:"Please select a valid option.",required:!0})]})}),u===2&&e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:ss})}),e.jsx(o,{ref:f,placeholder:"Add payment per Month",required:!0,invalid:ue,onChange:s=>{const a=s.target.value.replace(/\D/g,"");s.target.value=a,xe()},feedbackInvalid:De||"Please provide payment per month.",maxLength:"10"})]})}),u===4&&e.jsx("div",{className:"flex-fill mt-4",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:ss})}),e.jsx(o,{ref:f,placeholder:"Add payment per Month",required:!0,invalid:ue,onChange:s=>{const a=s.target.value.replace(/\D/g,"");s.target.value=a,xe()},feedbackInvalid:De||"Please provide payment per month.",maxLength:"10"})]})})]}),e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:Xs})}),e.jsx(o,{ref:O,type:"text",placeholder:"Name",required:!0,invalid:ee&&!((Ve=O.current)!=null&&Ve.value),feedbackInvalid:"Please provide a valid supervisor name."})]})}),e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:"@"}),e.jsx(o,{ref:I,type:"email",placeholder:"Email",required:!0,invalid:ee&&(Ae||!((Be=I.current)!=null&&Be.value)),onChange:ze,feedbackInvalid:hs||"Please provide a valid email."})]})})]}),e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:Ws})}),e.jsx(o,{ref:z,placeholder:"Mobile (10 digits)",required:!0,invalid:Me,onChange:s=>{const a=s.target.value.replace(/\D/g,"");s.target.value=a,$e()},feedbackInvalid:xs||"Please provide a valid mobile number.",maxLength:"10"})]})}),e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:"ðŸ“"}),e.jsx(o,{ref:E,placeholder:"Address",required:!0,invalid:Oe,onChange:Ue,feedbackInvalid:ys||"Please provide address."})]})})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 mb-3",children:[e.jsxs("div",{className:"flex-fill",style:{position:"relative"},children:[e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:as})}),e.jsx(o,{type:Z?"text":"password",ref:M,placeholder:"Enter New Password",required:!0,onChange:Le,autoComplete:"new-password",style:{paddingRight:"45px",border:le?"1px solid #dc3545":void 0}}),e.jsx("div",{onClick:()=>Ne(!Z),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",fontSize:"18px",color:"#6c757d",zIndex:10,userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px"},title:Z?"Hide password":"Show password",children:Z?"ðŸ™ˆ":"ðŸ‘ï¸"})]}),le&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:gs||"Please provide a valid password."})]}),e.jsxs("div",{className:"flex-fill",style:{position:"relative"},children:[e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(S,{icon:as})}),e.jsx(o,{type:G?"text":"password",ref:_,placeholder:"Confirm Password",required:!0,onChange:ge,autoComplete:"new-password",style:{paddingRight:"45px",border:ne?"1px solid #dc3545":void 0}}),e.jsx("div",{onClick:()=>Pe(!G),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",fontSize:"18px",color:"#6c757d",zIndex:10,userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px"},title:G?"Hide password":"Show password",children:G?"ðŸ™ˆ":"ðŸ‘ï¸"})]}),ne&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:vs||"Please confirm your password."})]})]}),u===2&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Assign Machines (Optional)"})}),e.jsx("div",{className:"p-2 border rounded bg-light",children:d.length>0?d.map(s=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`machine-${s.id}`,value:s.id,checked:D.includes(String(s.id)),onChange:a=>{const r=a.target.value;a.target.checked?se([...D,r]):se(D.filter(i=>i!==r))}}),e.jsx("label",{className:"form-check-label",htmlFor:`machine-${s.id}`,children:s.machine_name})]},s.id)):e.jsx("div",{children:"No machines available"})})]})]})}),e.jsxs(es,{children:[e.jsx(C,{color:"secondary",onClick:ye,children:"Cancel"}),e.jsx(C,{color:"success",onClick:qe,children:"Save"})]})]}),e.jsxs(We,{visible:ls,onClose:()=>B(!1),size:"lg",children:[e.jsx(Je,{children:e.jsx(Ke,{children:"Edit Operator"})}),e.jsx(Qe,{children:l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsx(o,{label:"Name",value:l.name,onChange:s=>A({...l,name:s.target.value})})}),e.jsx("div",{className:"flex-fill",children:e.jsx(o,{label:"Email",value:l.email,onChange:s=>A({...l,email:s.target.value})})})]}),e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsx(o,{label:"Mobile",value:l.mobile,onChange:s=>A({...l,mobile:s.target.value}),maxLength:10,pattern:"[6-9]\\d{9}",title:"Mobile number must be exactly 10 digits and start with 6, 7, 8, or 9",invalid:l.mobile&&!/^[6-9]\d{9}$/.test(l.mobile.replace(/\D/g,""))})}),e.jsx("div",{className:"flex-fill",children:e.jsx(Q,{label:"Type",value:l.type,onChange:s=>A({...l,type:parseInt(s.target.value)}),options:L})})]}),l.type===2||e.jsx("div",{className:"mb-3",children:e.jsx(o,{label:"Payment per Month",value:l.payment||"",onChange:s=>{const a=s.target.value.replace(/\D/g,"");A({...l,payment:a})},placeholder:"Enter payment amount"})}),l.type===2&&e.jsxs("div",{className:"mb-2 position-relative",children:[e.jsx("span",{style:{position:"relative",top:"10px",left:"0",backgroundColor:"white",paddingRight:"8px",color:"#0d6efd",fontWeight:"600"},children:"Machine"}),e.jsx("hr",{style:{marginTop:"0.5rem",border:"none",borderTop:"2px solid #0d6efd"}})]}),l.type===2&&e.jsxs(Q,{className:"mb-3",label:"Add Machine",value:"",onChange:s=>{As(s.target.value),s.target.value=""},children:[e.jsx("option",{value:"",children:"-- Select Machine --"}),d.map(s=>{const a=Array.isArray(s.operator_id)&&s.operator_id.map(String).includes(String(l.id)),r=g.adds.includes(String(s.id)),i=a||r;return e.jsxs("option",{value:s.id,disabled:i,children:[s.machine_name," ",i]},s.id)})]}),l.type===2&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Allocated Machines"})}),e.jsxs("div",{className:"p-2 border rounded bg-light",style:{maxHeight:"250px",overflowY:"auto"},children:[d.filter(s=>{const a=Array.isArray(s.operator_id)&&s.operator_id.map(String).includes(String(l.id)),r=g.adds.includes(String(s.id)),i=g.removes.includes(String(s.id));return(a||r)&&!i}).map(s=>{const a=g.adds.includes(String(s.id));return e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("span",{children:["â€¢ ",s.machine_name,a&&e.jsx("small",{className:"text-success ms-2"})]}),e.jsx(C,{color:"danger",size:"sm",onClick:()=>{Y(r=>({...r,removes:[...r.removes,String(s.id)],adds:r.adds.filter(i=>i!==String(s.id))}))},children:"Remove"})]},s.id)}),d.filter(s=>{const a=Array.isArray(s.operator_id)&&s.operator_id.map(String).includes(String(l.id)),r=g.adds.includes(String(s.id)),i=g.removes.includes(String(s.id));return(a||r)&&!i}).length===0&&e.jsx("div",{className:"text-muted",children:"No machines allocated"})]})]})]})}),e.jsxs(es,{children:[e.jsx(C,{color:"secondary",onClick:()=>B(!1),children:"Close"}),e.jsx(C,{color:"success",onClick:Ms,children:"Save Changes"})]})]}),e.jsx(Us,{visible:ps,setVisible:ae,onYes:Ns,resource:"Delete Operator",message:"Do you want to delete this Operator?"})]})};export{Ca as default};
