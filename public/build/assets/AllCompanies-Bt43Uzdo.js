import{b as Y,r as l,j as e,u as de}from"./index-BGxqQxQJ.js";import{M as ce}from"./mantine-react-table.esm-BhX9_Eig.js";import{r as me,a as ne,c as O,b as ie,g as pe}from"./api-BUyL__Lx.js";import{C as ue}from"./ConfirmationModal-CdEyWTW4.js";import{c as H,d as q,a as xe,b as he}from"./index.esm-C022RvEN.js";import{u as le,a as X,b as J,e as Z,c as D,d as ge,C}from"./DefaultLayout-CJqyOSiB.js";import{C as oe}from"./CForm-D5h_T_1V.js";import{C as V}from"./CInputGroup-DS0YxTA0.js";import{C as B}from"./CInputGroupText-D7wAdK2Y.js";import{c as fe}from"./cil-people-DQU-yEHN.js";import{C as G}from"./CFormSelect-H31wP_hu.js";import{c as je,a as ae}from"./cil-user-Dlmw-Gem.js";import{C as p}from"./CFormInput-BTypOiNL.js";import{c as be}from"./RawMaterial-D0BUKRzG.js";import{C as x}from"./CFormLabel-D2dR9F1X.js";import"./Table-DBvL4bFP.js";import"./MantineProvider-CZgnLa_g.js";import"./emotion-react.browser.esm-Cg8kCM-5.js";import"./floating-ui.dom-ByRZgDQ1.js";import"./CNavItem-BkPyVptB.js";import"./CFormControlWrapper-BLBktZ5v.js";import"./CFormControlValidation-C-pgsv8A.js";function ve({data:f,visible:w,setVisible:s}){const{showToast:k}=Y();le("global");const[N,L]=l.useState(!1),[E,i]=l.useState(""),[o,j]=l.useState(""),[h,R]=l.useState(""),[d,b]=l.useState(""),[v,P]=l.useState(""),[S,A]=l.useState("1"),[y,z]=l.useState(!1),[F,I]=l.useState(!1);l.useEffect(()=>{console.log("useEffect",f),f.company_id&&(i("Shop Owner"),j(f.email_id),R(f.phone_no),b(""),P(""))},[f]);const T=[{label:"Admin",value:"1"},{label:"User",value:"2"}],M=()=>{z(!y)},Q=()=>{I(!F)},a=async c=>{if(c.preventDefault(),c.stopPropagation(),c.currentTarget.checkValidity()===!1){L(!0);return}const u={name:E,email:o,mobile:h,password:d,password_confirmation:v,type:S,company_id:f.company_id};try{await me(u)?(s(!1),k("success","New user is created successfully"),z(!1),I(!1)):k("danger","Error occurred, please try again later.")}catch(U){k("danger","Error occurred "+U)}};return e.jsx(e.Fragment,{children:e.jsxs(X,{backdrop:"static",visible:w,onClose:()=>{s(!1),z(!1),I(!1)},"aria-labelledby":"StaticBackdropExampleLabel",children:[e.jsx(J,{children:e.jsx(Z,{children:"Create User"})}),e.jsx(D,{children:e.jsxs(oe,{noValidate:!0,validated:N,onSubmit:a,children:[e.jsxs(V,{className:"mb-4",children:[e.jsx(B,{children:e.jsx(H,{icon:fe})}),e.jsx(G,{"aria-label":"Default select example",value:S,onChange:c=>A(c.target.value),options:T,feedbackInvalid:"Please select a valid option."})]}),e.jsxs(V,{className:"mb-3",children:[e.jsx(B,{children:e.jsx(H,{icon:je})}),e.jsx(p,{value:E,onChange:c=>i(c.target.value),type:"username",placeholder:"Username",autoComplete:"name",required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs(V,{className:"mb-3",children:[e.jsx(B,{children:"@"}),e.jsx(p,{value:o,onChange:c=>j(c.target.value),placeholder:"Email",autoComplete:"email",type:"email",required:!0,feedbackInvalid:"Please provide email."})]}),e.jsxs(V,{className:"mb-3",children:[e.jsx(B,{children:e.jsx(H,{icon:be})}),e.jsx(p,{value:h,onChange:c=>R(c.target.value),placeholder:"Mobile",autoComplete:"phone",type:"mobile",required:!0,feedbackInvalid:"Please provide mobile number."})]}),e.jsxs(V,{className:"mb-3",children:[e.jsx(B,{children:e.jsx(H,{icon:ae})}),e.jsx(p,{type:y?"text":"password",value:d,onChange:c=>b(c.target.value),placeholder:"Enter New Password",autoComplete:"new-password",required:!0,feedbackInvalid:"Please provide password."}),e.jsx(B,{onClick:M,style:{cursor:"pointer"},title:y?"Hide password":"Show password",children:y?"ðŸ”’":"ðŸ‘ï¸"})]}),e.jsxs(V,{className:"mb-4",children:[e.jsx(B,{children:e.jsx(H,{icon:ae})}),e.jsx(p,{value:v,onChange:c=>P(c.target.value),type:F?"text":"password",placeholder:"Confirm password",autoComplete:"new-password",required:!0,feedbackInvalid:"Please provide confirm password."}),e.jsx(B,{onClick:Q,style:{cursor:"pointer"},title:F?"Hide password":"Show password",children:F?"ðŸ”’":"ðŸ‘ï¸"})]}),e.jsx("div",{className:"d-grid col-sm-3",children:e.jsx(q,{color:"success",type:"submit",children:"Save"})})]})})]})})}const ye=({visible:f,onClose:w,src:s,title:k="Image Preview",alt:N="Image",maxWidth:L="100%",maxHeight:E="70vh",downloadFileName:i="image"})=>{const o=async()=>{var j;try{const R=await(await fetch(s)).blob(),d=window.URL.createObjectURL(R),b=document.createElement("a");b.href=d;const v=((j=s.split(".").pop())==null?void 0:j.toLowerCase())||"jpg";b.download=`${i}.${v}`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(d)}catch(h){console.error("Download failed:",h),window.open(s,"_blank")}};return e.jsxs(X,{visible:f,onClose:w,size:"lg",backdrop:"static",scrollable:!0,children:[e.jsx(J,{closeButton:!0,children:e.jsx(Z,{children:k})}),e.jsx(D,{className:"text-center p-4",children:s?e.jsx("div",{className:"position-relative",children:e.jsx("img",{src:s,alt:N,className:"img-fluid rounded shadow-sm",style:{maxWidth:L,maxHeight:E,objectFit:"contain",border:"1px solid #e9ecef"}})}):e.jsxs("div",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-image fa-3x mb-3"}),e.jsx("p",{children:"No image available"})]})}),e.jsxs(ge,{className:"d-flex justify-content-between",children:[e.jsx("div",{className:"text-muted small",children:s&&e.jsx("span",{children:"Click and drag to view full size"})}),e.jsxs("div",{children:[s&&e.jsxs(e.Fragment,{children:[e.jsxs(q,{color:"success",variant:"outline",size:"sm",className:"me-2",onClick:o,children:[e.jsx("i",{className:"fas fa-download me-1"}),"Download"]}),e.jsxs(q,{color:"info",variant:"outline",size:"sm",className:"me-2",onClick:()=>window.open(s,"_blank"),children:[e.jsx("i",{className:"fas fa-external-link-alt me-1"}),"Open in New Tab"]})]}),e.jsx(q,{color:"secondary",onClick:w,children:"Close"})]})]})]})},_e=({visible:f,setVisible:w,companyData:s,onSuccess:k})=>{const{showToast:N}=Y(),[L,E]=l.useState(!1),{t:i}=le("global"),[o,j]=l.useState({companyName:"",land_mark:"",phone_no:"",email_id:"",bank_name:"",account_no:"",IFSC_code:"",logo:"",sign:"",paymentQRCode:"",appMode:"advance",tal:"Pune",dist:"Pune",pincode:"",initials:"",next_plan_id:"",subscribed_plan:""}),[h,R]=l.useState({phone_no:"",email_id:""}),[d,b]=l.useState({logo:"",sign:"",paymentQRCode:""}),[v,P]=l.useState({visible:!1,src:"",title:"",alt:""}),[S,A]=l.useState({plans:[]}),[y,z]=l.useState(""),[F,I]=l.useState(""),T=l.useRef(null),M=l.useRef(null),Q=l.useRef(null);l.useEffect(()=>{(async()=>{try{const r=await ne("/api/detailsForCompany");A(r||{plans:[]})}catch(r){console.error("Error fetching reference data:",r),N("danger","Failed to load plans data")}})()},[]);const a=n=>{const r=S.plans.find(g=>g.id==n);if(!r)return"";const m=r.name.toLowerCase();return m.includes("free trial")?"free_trial":m.includes("monthly")?"monthly":m.includes("quarterly")?"quarterly":m.includes("half-yearly")?"half-yearly":m.includes("annually")||m.includes("yearly")?"annually":""},c=(n,r,m="Image")=>{P({visible:!0,src:n,title:r,alt:m})},ee=()=>{P({visible:!1,src:"",title:"",alt:""})};l.useEffect(()=>{if(s&&f){if(j({companyName:s.company_name||"",land_mark:s.land_mark||"",phone_no:s.phone_no||"",email_id:s.email_id||"",bank_name:s.bank_name||"",account_no:s.account_no||"",IFSC_code:s.IFSC_code||"",logo:s.logo||"",sign:s.sign||"",paymentQRCode:s.paymentQRCode||"",appMode:s.appMode||"advance",tal:s.Tal,dist:s.Dist,pincode:s.pincode||"",initials:s.initials||"",next_plan_id:s.next_plan_id||"",subscribed_plan:s.subscribed_plan||""}),b({logo:s.logo?`/img/${s.logo}`:"",sign:s.sign?`/img/${s.sign}`:"",paymentQRCode:s.paymentQRCode?`/img/${s.paymentQRCode}`:""}),s.subscribed_plan){const n=a(s.subscribed_plan);I(n)}if(s.next_plan_id){const n=a(s.next_plan_id);z(n)}E(!1),R({phone_no:"",email_id:""})}},[s,f,S.plans]);const u=n=>{const{name:r,value:m,files:g}=n.target;if(g&&g.length>0){const t=g[0];if(j({...o,[r]:t}),t.type.startsWith("image/")){const K=new FileReader;K.onload=se=>{b(_=>({..._,[r]:se.target.result}))},K.readAsDataURL(t)}}else j({...o,[r]:m})},U=n=>{j({...o,[n]:""}),b(r=>({...r,[n]:""})),n==="logo"&&T.current?T.current.value="":n==="sign"&&M.current?M.current.value="":n==="paymentQRCode"&&Q.current&&(Q.current.value="")},te=async n=>{var m,g;const r=n.currentTarget;if(n.preventDefault(),n.stopPropagation(),E(!0),r.checkValidity()!==!0){N("danger","Kindly provide data of all required fields");return}try{let t={...o};if(o.logo instanceof File){const _=new FormData;_.append("file",o.logo),_.append("dest","invoice");const $=await O("/api/fileUpload",_);t.logo=$.fileName}if(o.sign instanceof File){const _=new FormData;_.append("file",o.sign),_.append("dest","invoice");const $=await O("/api/fileUpload",_);t.sign=$.fileName}if(o.paymentQRCode instanceof File){const _=new FormData;_.append("file",o.paymentQRCode),_.append("dest","invoice");const $=await O("/api/fileUpload",_);t.paymentQRCode=$.fileName}const K={company_name:t.companyName,land_mark:t.land_mark,tal:t.tal,dist:t.dist,pincode:t.pincode,phone_no:t.phone_no,email_id:t.email_id,bank_name:t.bank_name||"",account_no:t.account_no||"",IFSC_code:t.IFSC_code||"",logo:t.logo||"",sign:t.sign||"",paymentQRCode:t.paymentQRCode||"",appMode:t.appMode||"advance",initials:t.initials||"INV",next_plan_id:t.next_plan_id||null};console.log("Update payload:",K);const se=await ie(`/api/companies/${s.company_id}`,K);N("success","Company details updated successfully."),w(!1),k&&k()}catch(t){console.error("Error updating company:",t),N("danger","Error occurred: "+(((g=(m=t.response)==null?void 0:m.data)==null?void 0:g.message)||t.message))}},W=({src:n,alt:r,onRemove:m,label:g})=>e.jsx("div",{className:"image-preview-container mt-2",children:n?e.jsxs("div",{className:"d-flex align-items-center gap-2 p-2 bg-light rounded",children:[e.jsxs("button",{type:"button",className:"btn btn-link p-0 text-primary",style:{fontSize:"14px",textDecoration:"none"},onClick:()=>c(n,`${g} Preview`,`${g} image`),title:`View ${g}`,children:[e.jsx("i",{className:"fas fa-eye me-1"}),"View ",g]}),e.jsxs("button",{type:"button",className:"btn btn-danger btn-sm",style:{fontSize:"12px",padding:"4px 8px"},onClick:m,title:`Remove ${g}`,children:[e.jsx("i",{className:"fas fa-trash me-1"}),"Remove"]})]}):e.jsxs("div",{className:"text-muted small fst-italic mt-1",children:[e.jsx("i",{className:"fas fa-image me-1"}),"No ",g.toLowerCase()," selected"]})}),re=()=>{var r;if(!o.subscribed_plan)return!1;const n=S.plans.find(m=>m.id==o.subscribed_plan);return(r=n==null?void 0:n.name)==null?void 0:r.toLowerCase().includes("free trial")};return e.jsxs(e.Fragment,{children:[e.jsxs(X,{visible:f,onClose:()=>w(!1),size:"xl",backdrop:"static",children:[e.jsx(J,{children:e.jsxs(Z,{children:[i("LABELS.edit_company"),": ",s==null?void 0:s.company_name]})}),e.jsx(D,{children:e.jsxs(oe,{noValidate:!0,validated:L,onSubmit:te,encType:"multipart/form-data",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"companyName",children:i("LABELS.company_name")}),e.jsx(p,{type:"text",name:"companyName",id:"companyName",maxLength:"100",value:o.companyName,onChange:u,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"land_mark",children:i("LABELS.address_label")}),e.jsx(p,{type:"text",name:"land_mark",id:"land_mark",maxLength:"100",value:o.land_mark,onChange:u,feedbackInvalid:"Please provide shop address.",required:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"tal",children:i("LABELS.taluka")||"Taluka"}),e.jsx(p,{type:"text",name:"tal",id:"tal",maxLength:"50",value:o.tal,onChange:u,feedbackInvalid:"Please provide taluka.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"dist",children:i("LABELS.district")||"District"}),e.jsx(p,{type:"text",name:"dist",id:"dist",maxLength:"50",value:o.dist,onChange:u,feedbackInvalid:"Please provide district.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"pincode",children:i("LABELS.pincode")||"Pincode"}),e.jsx(p,{type:"text",name:"pincode",id:"pincode",maxLength:"6",minLength:"6",pattern:"[0-9]{6}",value:o.pincode,onChange:u,feedbackInvalid:"Please provide valid 6-digit pincode.",required:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"phone_no",children:i("LABELS.mobile_number")}),e.jsx(p,{type:"text",name:"phone_no",id:"phone_no",value:o.phone_no,onChange:u,invalid:!!h.phone_no,feedbackInvalid:h.phone_no!==""?h.phone_no:"Please provide valid 10 digit mobile.",pattern:"\\d{10}",required:!0,minLength:10,maxLength:10})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"email_id",children:i("LABELS.email")}),e.jsx(p,{type:"email",name:"email_id",id:"email_id",invalid:!!h.email_id,value:o.email_id,onChange:u,feedbackInvalid:h.email_id!==""?h.email_id:"Please provide email address.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"initials",children:i("LABELS.initials")||"Initials"}),e.jsx(p,{type:"text",name:"initials",id:"initials",maxLength:"10",value:o.initials,onChange:u})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"bank_name",children:i("LABELS.bank_name")}),e.jsx(p,{type:"text",name:"bank_name",id:"bank_name",value:o.bank_name,onChange:u})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"account_no",children:i("LABELS.account_number")}),e.jsx(p,{type:"number",name:"account_no",id:"account_no",value:o.account_no,onChange:u})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"IFSC_code",children:i("LABELS.IFSC")}),e.jsx(p,{type:"text",name:"IFSC_code",id:"IFSC_code",value:o.IFSC_code,onChange:u})]})})]}),re()&&e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-12",children:e.jsx("h5",{className:"mt-3 mb-3",children:"Next Renewal Plan"})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"next_billing_type",children:i("LABELS.next_renewal_type")||"Next Renewal Type"}),e.jsxs(G,{id:"next_billing_type",name:"next_billing_type",value:y,onChange:n=>{z(n.target.value),j(r=>({...r,next_plan_id:""}))},children:[e.jsx("option",{value:"",children:i("LABELS.select_next_type")||"-- Select Type --"}),e.jsx("option",{value:"monthly",children:i("LABELS.monthly")||"Monthly"}),e.jsx("option",{value:"quarterly",children:i("LABELS.quarterly")||"Quarterly"}),e.jsx("option",{value:"half-yearly",children:i("LABELS.half_yearly")||"Half-Yearly"}),e.jsx("option",{value:"annually",children:i("LABELS.annually")||"Annually"})]})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"next_plan_id",children:i("LABELS.next_renewal_plan")||"Next Renewal Plan"}),e.jsxs(G,{id:"next_plan_id",name:"next_plan_id",value:o.next_plan_id||"",onChange:u,disabled:!y,children:[e.jsx("option",{value:"",children:"-- Select Plan --"}),S.plans.filter(n=>{var m;const r=((m=n.name)==null?void 0:m.toLowerCase())||"";return y&&r.includes(y.toLowerCase())&&!r.includes("free trial")}).map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"logo",children:i("LABELS.logo")}),e.jsx(p,{type:"file",name:"logo",id:"logo",accept:"image/png, image/jpeg",onChange:u,ref:T}),e.jsx(W,{src:d.logo,alt:"Logo Preview",onRemove:()=>U("logo"),label:"Logo"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"sign",children:i("LABELS.sign")}),e.jsx(p,{type:"file",name:"sign",id:"sign",accept:"image/png, image/jpeg",onChange:u,ref:M}),e.jsx(W,{src:d.sign,alt:"Signature Preview",onRemove:()=>U("sign"),label:"Signature"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"paymentQRCode",children:i("LABELS.qr_img")}),e.jsx(p,{type:"file",name:"paymentQRCode",id:"paymentQRCode",accept:"image/png, image/jpeg",onChange:u,ref:Q}),e.jsx(W,{src:d.paymentQRCode,alt:"QR Code Preview",onRemove:()=>U("paymentQRCode"),label:"QR Code"})]})})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(q,{type:"submit",color:"primary",children:[e.jsx("i",{className:"fas fa-save me-1"}),i("LABELS.update")]}),e.jsxs(q,{type:"button",color:"secondary",variant:"outline",onClick:()=>w(!1),children:[e.jsx("i",{className:"fas fa-times me-1"}),i("LABELS.cancel")]})]})]})})]}),e.jsx(ye,{visible:v.visible,onClose:ee,src:v.src,title:v.title,alt:v.alt})]})},He=()=>{de();const[f,w]=l.useState([]),[s,k]=l.useState(),[N,L]=l.useState(!1),[E,i]=l.useState(!1),[o,j]=l.useState(!1),[h,R]=l.useState({}),[d,b]=l.useState(window.innerWidth<768),{showToast:v}=Y(),P=pe(),S=P.type;l.useEffect(()=>{const a=()=>{b(window.innerWidth<768)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const A=async()=>{try{const a=await ne("/api/companies");S==0?w(a):w(a.filter(c=>c.refer_by_id==P.id))}catch(a){v("danger","Error occured "+a)}};l.useEffect(()=>{A()},[]);const y=a=>{k(a),L(!0)},z=async()=>{try{await ie(`/api/company/${s.company_id}/toggle-blocks`,{block_status:s.block_status==0?1:0}),L(!1),A();const a=s.block_status==0?"blocked":"unblocked";v("success",`Company "${s.company_name}" has been ${a} successfully`)}catch(a){v("danger","Error occurred: "+a)}},F=a=>{R(a),j(!0)},I=a=>{R(a),i(!0)},T=[{accessorKey:"index",header:"Id",size:60},{accessorKey:"company_name",header:"Name",size:150},{accessorKey:"phone_no",header:"Mobile",size:120},{accessorKey:"email_id",header:"Email",size:180},{accessorKey:"Tal",header:"Address",size:150,Cell:({cell:a})=>e.jsx("span",{title:a.row.original.land_mark,children:a.row.original.land_mark})},{accessorKey:"subscription_validity",header:"Valid Till",size:120},{accessorKey:"block_status",header:"Status",size:100,Cell:({cell:a})=>a.row.original.block_status==0?e.jsx(C,{color:"success",children:"Active"}):e.jsx(C,{color:"danger",children:"Blocked"})},{accessorKey:"actions",header:"Actions",size:200,Cell:({cell:a})=>S==0?e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:[e.jsx(C,{role:"button",color:"success",onClick:()=>I(a.row.original),style:{cursor:"pointer",fontSize:"0.75rem",padding:"4px 8px"},children:"Create User"}),e.jsx(C,{role:"button",color:"info",onClick:()=>F(a.row.original),style:{cursor:"pointer",fontSize:"0.75rem",padding:"4px 8px"},children:"Edit"}),e.jsx(C,{role:"button",color:"danger",onClick:()=>y(a.row.original),style:{cursor:"pointer",fontSize:"0.75rem",padding:"4px 8px"},children:a.row.original.block_status==0?"Block":"Unblock"})]}):e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:[e.jsx(C,{role:"button",color:"info",onClick:()=>F(a.row.original),style:{cursor:"pointer",fontSize:"0.75rem",padding:"4px 8px"},children:"Edit"}),e.jsx(C,{role:"button",color:"danger",onClick:()=>y(a.row.original),style:{cursor:"pointer",fontSize:"0.75rem",padding:"4px 8px"},children:a.row.original.block_status==0?"Block":"Unblock"})]})}],M=f.map((a,c)=>({...a,index:c+1})),Q=[{accessorKey:"index",header:"Id",size:40},{accessorKey:"company_name",header:"Name",size:100},{accessorKey:"phone_no",header:"Mobile",size:90},{accessorKey:"email_id",header:"Email",size:120,Cell:({cell:a})=>e.jsx("div",{style:{fontSize:"0.75rem",wordBreak:"break-word"},children:a.getValue()})},{accessorKey:"Tal",header:"Address",size:100,Cell:({cell:a})=>e.jsx("div",{style:{fontSize:"0.75rem",wordBreak:"break-word"},title:a.row.original.land_mark,children:a.row.original.land_mark})},{accessorKey:"subscription_validity",header:"Valid Till",size:80,Cell:({cell:a})=>e.jsx("div",{style:{fontSize:"0.75rem"},children:a.getValue()})},{accessorKey:"block_status",header:"Status",size:70,Cell:({cell:a})=>a.row.original.block_status==0?e.jsx(C,{color:"success",style:{fontSize:"0.65rem"},children:"Active"}):e.jsx(C,{color:"danger",style:{fontSize:"0.65rem"},children:"Blocked"})},{accessorKey:"actions",header:"Actions",size:120,Cell:({cell:a})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[S==0&&e.jsx(C,{role:"button",color:"success",onClick:()=>I(a.row.original),style:{cursor:"pointer",fontSize:"0.6rem",padding:"2px 4px"},children:"Create User"}),e.jsx(C,{role:"button",color:"info",onClick:()=>F(a.row.original),style:{cursor:"pointer",fontSize:"0.6rem",padding:"2px 4px"},children:"Edit"}),e.jsx(C,{role:"button",color:"danger",onClick:()=>y(a.row.original),style:{cursor:"pointer",fontSize:"0.6rem",padding:"2px 4px"},children:a.row.original.block_status==0?"Block":"Unblock"})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(ue,{visible:N,setVisible:L,onYes:z,resource:'Block company "'+(s==null?void 0:s.company_name)+'"'}),e.jsx(ve,{visible:E,setVisible:i,data:h}),e.jsx(_e,{visible:o,setVisible:j,companyData:h,onSuccess:A}),e.jsx(xe,{children:e.jsx(he,{xs:12,children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsx(ce,{defaultColumn:{maxSize:d?150:400,minSize:d?40:80,size:d?80:120},enableStickyHeader:!0,enableStickyFooter:!0,enableDensityToggle:!1,initialState:{density:"xs"},enableColumnResizing:!d,columns:d?Q:T,data:M,enableFullScreenToggle:!1,mantineTableContainerProps:{sx:{minHeight:"400px",maxHeight:"80vh",fontSize:d?"0.75rem":"1rem"}},mantineTableProps:{sx:{tableLayout:"fixed","& th":{fontSize:d?"0.7rem":"0.875rem",padding:d?"4px 6px":"8px 12px",fontWeight:600},"& td":{fontSize:d?"0.65rem":"0.875rem",padding:d?"4px 6px":"8px 12px",lineHeight:d?"1.2":"1.5"}}},mantineTableHeadProps:{sx:{"& th":{backgroundColor:d?"#f8f9fa":"inherit"}}}})})})})]})};export{He as default};
