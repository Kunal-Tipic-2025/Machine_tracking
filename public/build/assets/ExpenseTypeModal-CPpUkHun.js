import{b,r as x,j as e}from"./index-BaFO0fBD.js";import{b as C,p as v}from"./api-BUyL__Lx.js";import{u as S,a as L,b as N,c as w,d as M,e as B}from"./DefaultLayout-CO5Zw0Z5.js";import{C as F}from"./CForm-aAQP41oT.js";import{C as d}from"./CFormLabel-zcG2lLqz.js";import{C as h}from"./CFormInput-Bf1zI-co.js";import{C as A}from"./CFormSelect-CKz9M81i.js";import{C as k}from"./CFormCheck-D_Tx0DsR.js";import{d as _}from"./index.esm-6sS0QU7y.js";const R=({visible:i,onClose:m,onSuccess:g,editData:r=null})=>{const{t:a}=S("global"),{showToast:p}=b(),[j,u]=x.useState(!1),[s,c]=x.useState({name:"",localName:"",expense_category:"",desc:"",show:1});x.useEffect(()=>{i&&(c(r?{name:r.name||"",localName:r.localName||"",expense_category:r.expense_category||"",desc:r.desc||"",show:r.show}:{name:"",localName:"",expense_category:"",desc:"",show:1}),u(!1))},[i,r]);const l=t=>{const{name:o,value:n,type:f,checked:E}=t.target;f==="checkbox"?c({...s,[o]:E?1:0}):o==="name"?/^[a-zA-Z0-9 ]*$/.test(n)&&c({...s,[o]:n}):c({...s,[o]:n})},y=async t=>{if(t.preventDefault(),t.stopPropagation(),u(!0),!(!s.name||!s.expense_category||!s.desc))try{const o={name:s.name,localName:s.localName||"",expense_category:s.expense_category,desc:s.desc||"",show:s.show===1?1:0,slug:s.name.replace(/[^\w]/g,"_")};let n;r?n=await C(`/api/expenseType/${r.id}`,o):n=await v("/api/expenseType",o),n?(p("success",r?a("MSG.expense_type_updated_successfully_msg")||"Expense type updated successfully":a("MSG.expense_type_added_successfully_msg")||"Expense type added successfully"),g(),m()):p("danger",a("MSG.error_occured_please_try_again_later_msg")||"Error occurred.")}catch(o){p("danger","Error occurred: "+o)}};return e.jsxs(L,{visible:i,onClose:m,size:"lg",backdrop:"static",children:[e.jsx(N,{children:e.jsx(w,{children:r?a("LABELS.edit_expense_type")||"Edit Expense Type":a("LABELS.new_expense_type")||"New Expense Type"})}),e.jsx(M,{children:e.jsxs(F,{noValidate:!0,validated:j,onSubmit:y,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(d,{htmlFor:"name",children:e.jsxs("b",{children:[a("LABELS.name")||"Name"," *"]})}),e.jsx(h,{type:"text",id:"name",name:"name",value:s.name,onChange:l,required:!0,feedbackInvalid:a("MSG.please_provide_name_msg")||"Please provide a name."})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(d,{htmlFor:"localName",children:e.jsxs("b",{children:[a("LABELS.local_name")||"Local Name"," "]})}),e.jsx(h,{type:"text",id:"localName",name:"localName",value:s.localName,onChange:l})]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(d,{htmlFor:"expense_category",children:e.jsxs("b",{children:[a("LABELS.expense_category")," *"]})}),e.jsxs(A,{id:"expense_category",name:"expense_category",value:s.expense_category,onChange:l,required:!0,feedbackInvalid:"Please select an expense category.",children:[e.jsx("option",{value:"",children:"-- Select Category --"}),e.jsx("option",{value:"Machine Expense",children:"Machine Expense"}),e.jsx("option",{value:"Operator Expense",children:"Operator/Helper Expense"}),e.jsx("option",{value:"Other Expense",children:"Other Expense"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(d,{htmlFor:"desc",children:e.jsxs("b",{children:[a("LABELS.short_desc")||"Short Description"," *"]})}),e.jsx(h,{type:"text",id:"desc",name:"desc",value:s.desc,onChange:l,required:!0,feedbackInvalid:a("MSG.please_provide_description_msg")||"Please provide a short description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(k,{id:"show",label:a("LABELS.visible")||"Visible",name:"show",checked:s.show===1,onChange:l})})]})}),e.jsxs(B,{children:[e.jsx(_,{color:"secondary",onClick:m,children:a("LABELS.cancel")||"Cancel"}),e.jsx(_,{color:"primary",onClick:y,children:r?a("LABELS.update")||"Update":a("LABELS.submit")||"Submit"})]})]})};export{R as E};
