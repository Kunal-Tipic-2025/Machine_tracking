import{r as t,j as e}from"./index-WEbTLRLZ.js";import{a as m,d as x,b as j}from"./api-Ba1wfMeh.js";import{a as C,b as f,d as b}from"./index.esm-CZeMoYDH.js";import{C as y,a as w}from"./CCardBody-CtNgr8m7.js";import{C as U}from"./CCardHeader-LFhc_ZAM.js";import{C as u,a as g,b as d,c as l,d as k,e as c}from"./CTable-DcVbcKI_.js";import{C as A}from"./CFormSwitch-DwPQ0uDG.js";import"./CFormLabel-D964ZFYD.js";function v(){const[n,i]=t.useState([]);t.useEffect(()=>{(async()=>{try{const r=await m("/api/appUsers");i(r.data)}catch(r){console.error("Error fetching users:",r)}})()},[]);const h=async s=>{if(window.confirm("Are you sure you want to delete this user?"))try{await x(`/api/appUsers/delete/${s}`),i(o=>o.filter(a=>a.id!==s))}catch(o){console.error("Error deleting user:",o),alert("Failed to delete user.")}},p=async s=>{if(s.type!==2){alert("Only users of type 2 (normal users) can be blocked/unblocked.");return}const r={...s,blocked:s.blocked===1?0:1};try{await j("/api/appUsers",r),i(o=>o.map(a=>a.id===s.id?r:a))}catch(o){console.error("Error updating user:",o)}};return e.jsx(C,{children:e.jsx(f,{xs:12,children:e.jsxs(y,{className:"mb-4",children:[e.jsx(U,{children:e.jsx("strong",{children:"All Users"})}),e.jsx(w,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs(u,{children:[e.jsx(g,{children:e.jsxs(d,{children:[e.jsx(l,{scope:"col",children:"Id"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Email"}),e.jsx(l,{scope:"col",children:"Mobile"}),e.jsx(l,{scope:"col",children:"Type"}),e.jsx(l,{scope:"col",children:"Blocked"}),e.jsx(l,{scope:"col",children:"Actions"})]})}),e.jsx(k,{children:n.map((s,r)=>e.jsxs(d,{children:[e.jsx(l,{scope:"row",children:r+1}),e.jsx(c,{children:s.name}),e.jsx(c,{children:s.email}),e.jsx(c,{children:s.mobile}),e.jsxs(c,{children:[" ",s.type===1?"Admin":"User"]}),e.jsx(c,{children:e.jsx(A,{id:`formSwitchCheckDefault${s.id}`,checked:s.blocked===1,onChange:()=>p(s),disabled:s.type!==2})}),e.jsx(c,{children:e.jsx(b,{color:"danger",size:"sm",onClick:()=>h(s.id),children:"Delete"})})]},s.id))})]})})})]})})})}export{v as default};
