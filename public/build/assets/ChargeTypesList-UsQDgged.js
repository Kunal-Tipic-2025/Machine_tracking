import{r as t,b as w,j as e,C as S}from"./index-DytM8ejS.js";import{a as v,d as A}from"./api-BUyL__Lx.js";import{C as E}from"./ChargeTypeModal-BWFkoTKo.js";import{d,c as h}from"./index.esm-CwEsjKuX.js";import{C as D,a as B}from"./CCardBody-8PK9ymk0.js";import{C as H}from"./CCardHeader-CHPNZi9P.js";import{c as P}from"./cil-plus-D8mtC-W5.js";import{C as k,a as I,b as m,c as a,d as L,e as r}from"./CTable-C3gvlNt3.js";import{C as c}from"./DefaultLayout-C8flodPp.js";import{c as M}from"./cil-pencil-m516yCOw.js";import{c as z}from"./cil-trash-CBbKHhHb.js";import"./CForm-DMkP9umK.js";import"./CFormLabel-CqwMi-ru.js";import"./CFormInput-BiKhmGTd.js";import"./CFormControlWrapper-BcaF3RGm.js";import"./CFormControlValidation-C-j7lld-.js";import"./CFormCheck-B5QhZpwe.js";import"./cil-user-Dlmw-Gem.js";import"./RawMaterial-BbmPFW3_.js";import"./CNavItem-lUoRkAFO.js";const te=()=>{const[p,u]=t.useState([]),[g,x]=t.useState(!0),[j,l]=t.useState(!1),[f,C]=t.useState(null),{showToast:o}=w(),i=async()=>{x(!0);try{const s=await v("/api/charge-types?all=1");u(s||[])}catch(s){console.error(s),o("danger","Failed to fetch charge types")}finally{x(!1)}};t.useEffect(()=>{i()},[]);const y=()=>{C(null),l(!0)},T=s=>{C(s),l(!0)},b=async s=>{if(window.confirm("Are you sure you want to delete this charge type?"))try{await A(`/api/charge-types/${s}`),o("success","Charge type deleted successfully"),i()}catch(n){console.error(n),o("danger","Failed to delete charge type")}},N=()=>{i(),l(!1)};return e.jsxs("div",{className:"p-4",children:[e.jsxs(D,{children:[e.jsxs(H,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"All Charge Types"}),e.jsxs(d,{color:"primary",onClick:y,className:"d-flex align-items-center gap-2",children:[e.jsx(h,{icon:P})," Add Charge Type"]})]}),e.jsx(B,{children:g?e.jsx("div",{className:"text-center p-5",children:e.jsx(S,{color:"primary"})}):e.jsx("div",{className:"table-responsive",children:e.jsxs(k,{hover:!0,bordered:!0,striped:!0,children:[e.jsx(I,{color:"light",children:e.jsxs(m,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Name"}),e.jsx(a,{children:"Local Name"}),e.jsx(a,{children:"Effect"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-center",children:"Actions"})]})}),e.jsx(L,{children:p.length===0?e.jsx(m,{children:e.jsx(r,{colSpan:6,className:"text-center p-4 text-muted",children:"No charge types found. Create one to get started."})}):p.map((s,n)=>e.jsxs(m,{className:"align-middle",children:[e.jsx(r,{children:n+1}),e.jsx(r,{className:"fw-semibold",children:s.name}),e.jsx(r,{children:s.local_name||"-"}),e.jsx(r,{children:s.amount_deduct?e.jsx(c,{color:"danger",children:"Deduct (-)"}):e.jsx(c,{color:"success",children:"Add (+)"})}),e.jsx(r,{children:s.show?e.jsx(c,{color:"success",shape:"rounded-pill",children:"Visible"}):e.jsx(c,{color:"secondary",shape:"rounded-pill",children:"Hidden"})}),e.jsxs(r,{className:"text-center",children:[e.jsx(d,{color:"info",variant:"ghost",size:"sm",className:"me-2",onClick:()=>T(s),title:"Edit",children:e.jsx(h,{icon:M})}),e.jsx(d,{color:"danger",variant:"ghost",size:"sm",onClick:()=>b(s.id),title:"Delete",children:e.jsx(h,{icon:z})})]})]},s.id))})]})})})]}),j&&e.jsx(E,{visible:j,onClose:()=>l(!1),onSuccess:N,initialData:f})]})};export{te as default};
