import{r as l,b as Es,j as e,C as ks}from"./index-BaFO0fBD.js";import{C as Rs,a as Ts,b as Os,d as S,c as C}from"./index.esm-6sS0QU7y.js";import{g as Ds,a as Q,d as $s,r as zs,b as V}from"./api-BUyL__Lx.js";import{C as Us}from"./ConfirmationModal-BsIVVqWL.js";import{C as Hs,a as Ls}from"./CCardBody-C_DcNhkI.js";import{C as qs}from"./CCardHeader-uQH1AYuq.js";import{C as Fs,a as Vs,b as Xe,c as h,d as Bs,e as x}from"./CTable-BC39XzuD.js";import{a as We,b as Je,c as Ke,d as Qe,e as es}from"./DefaultLayout-CO5Zw0Z5.js";import{C as Ys}from"./CForm-aAQP41oT.js";import{C as p}from"./CInputGroup-jXSXCS9j.js";import{C as m}from"./CInputGroupText-DExXWOSE.js";import{c as Zs}from"./cib-amazon-pay-kD6VdHHX.js";import{C as ee}from"./CFormSelect-CKz9M81i.js";import{c as Gs}from"./cil-people-DQU-yEHN.js";import{c as ss}from"./cil-money-Dk3vHnQB.js";import{C as o}from"./CFormInput-Bf1zI-co.js";import{c as Xs,a as as}from"./cil-user-Dlmw-Gem.js";import{c as Ws}from"./RawMaterial-D7bfBri4.js";import{C as Js}from"./CTooltip-C0zLUccy.js";import"./CNavItem-BYh17SIg.js";import"./CFormControlWrapper-DiPXZd7c.js";import"./CFormControlValidation-D0XpqgJc.js";import"./CFormLabel-zcG2lLqz.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";const Sa=()=>{var Be,Ye;const[rs,be]=l.useState([]),[ts,Se]=l.useState(!1),[ls,B]=l.useState(!1),[t,P]=l.useState(null),[se,Ce]=l.useState(!1),[is,we]=l.useState([]),[d,ns]=l.useState([]),[os,ds]=l.useState([]),[O,ae]=l.useState([]),[Ne,cs]=l.useState([]),[ps,re]=l.useState(!1),[ms,us]=l.useState(null),[g,Y]=l.useState({adds:[],removes:[]}),[Z,Ae]=l.useState(!1),[G,Pe]=l.useState(!1),[Ie,te]=l.useState(!1),[fs,Me]=l.useState(!0),[_e,le]=l.useState(!1),[ie,ne]=l.useState(!1),[oe,de]=l.useState(!1),[Ee,ke]=l.useState(!1),[Re,Te]=l.useState(!1),[hs,ce]=l.useState(""),[xs,pe]=l.useState(""),[gs,me]=l.useState(""),[vs,ue]=l.useState(""),[u,Oe]=l.useState(""),[fe,v]=l.useState(!1),[De,y]=l.useState(""),[$e,he]=l.useState(!1),[ys,xe]=l.useState(""),D=l.useRef(),I=l.useRef(),$=l.useRef(),M=l.useRef(),_=l.useRef(),z=l.useRef(),U=l.useRef(),f=l.useRef(),E=l.useRef(),{showToast:n}=Es(),w=Ds();let H=[];w.type===0?H=[{label:"Select User Type ",value:""},{label:"Super Admin",value:"0"},{label:"Admin",value:"1"},{label:"User",value:"2",disabled:!1}]:w.type===1?H=[{label:"Select User Type ",value:""},{label:"Admin",value:"1"},{label:"Operator",value:"2",disabled:!1},{label:"Helper",value:"4",disabled:!1}]:H=[{label:"Select User Type ",value:""},{label:"User",value:"2",disabled:!1}];const js=s=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s),bs=s=>s.replace(/\D/g,"").length===10,Ss=s=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(s),ze=()=>{var a;const s=((a=I.current)==null?void 0:a.value)||"";s&&!js(s)?(te(!0),ce("Please enter a valid email address")):(te(!1),ce(""))},Ue=()=>{var a;const s=((a=$.current)==null?void 0:a.value)||"";s&&!bs(s)?(le(!0),pe("Please enter exactly 10 digits")):(le(!1),pe(""))},He=()=>{var a;(((a=E.current)==null?void 0:a.value)||"").trim().length===0?(he(!0),xe("Please enter Address")):(he(!1),xe(""))},ge=()=>{var a;const s=((a=f.current)==null?void 0:a.value)||"";u===2?!s||s.trim()===""?(v(!0),y("Payment per month is required for Operator")):parseInt(s)<=0?(v(!0),y("Payment must be greater than 0")):(v(!1),y("")):u===4?!s||s.trim()===""?(v(!0),y("Payment per month is required for Helper")):parseInt(s)<=0?(v(!0),y("Payment must be greater than 0")):(v(!1),y("")):(v(!1),y(""))},Le=()=>{var a,r;const s=((a=M.current)==null?void 0:a.value)||"";s&&!Ss(s)?(ne(!0),me("Password must be at least 8 characters with uppercase, lowercase, number and special character")):(ne(!1),me("")),(r=_.current)!=null&&r.value&&ve()},ve=()=>{var r,i;const s=((r=M.current)==null?void 0:r.value)||"",a=((i=_.current)==null?void 0:i.value)||"";a&&s!==a?(de(!0),ue("Passwords do not match")):(de(!1),ue(""))},X=(s,a=!1)=>{const r=parseInt(a?U.current.value:z.current.value,10);a?Te(!(r>0)):(ke(![0,1,2,3,4].includes(r)),Oe(r))},ye=async()=>{try{const s=await Q("/api/machine-operators");ns(s||[])}catch(s){console.error("Error fetching machines:",s),n("danger","Error fetching machines")}},qe=async()=>{try{const s=await Q("/api/myProjects");ds(s||[])}catch(s){console.error("Error fetching projects:",s)}};l.useEffect(()=>{Q("/api/companies").then(s=>{if(s!=null&&s.length){const a=s.map(r=>({label:r.company_name,value:r.company_id}));w.type===0?we(a):we(a.filter(r=>r.value===w.company_id))}}).catch(s=>n("danger","Error: "+s))},[]);const W=async()=>{try{Me(!0);const s=await Q("/api/appUsers");let a=[];s!=null&&s.data&&Array.isArray(s.data)&&(a=s.data.filter(r=>String(r.company_id)===String(w.company_id))),be(a)}catch(s){console.error("Error fetching operators:",s),n("danger","Error fetching operators: "+s.message),be([])}finally{Me(!1)}};l.useEffect(()=>{W(),ye(),qe()},[]);const Cs=()=>{D.current&&(D.current.value=""),I.current&&(I.current.value=""),$.current&&($.current.value=""),M.current&&(M.current.value=""),_.current&&(_.current.value=""),z.current&&(z.current.value=""),U.current&&(U.current.value=""),f.current&&(f.current.value=""),E.current&&(E.current.value=""),Ce(!1),ke(!1),Te(!1),te(!1),le(!1),ne(!1),de(!1),ce(""),pe(""),me(""),ue(""),Ae(!1),Pe(!1),ae([]),cs([]),Oe(""),v(!1),y(""),he(!1),xe("")},je=()=>{Se(!1),Cs()},ws=s=>{us(s),re(!0)},Ns=async()=>{try{await $s(`/api/appUsers/delete/${ms.id}`),n("success","User deleted successfully."),re(!1),W()}catch(s){console.error("Error deleting user:",s),n("danger","Failed to delete user!")}},Fe=async s=>{var i,k,J,K,j,c,L,R,b,Ze,Ge;s.preventDefault(),s.stopPropagation();const a=s.currentTarget;if(Ce(!0),ze(),Ue(),Le(),ve(),X(null,!1),X(null,!0),ge(),He(),a.checkValidity()===!1||Ie||_e||ie||oe||Ee||Re||fe||$e){n("danger","Please check All Fields before submitting");return}const r={name:(i=D.current)==null?void 0:i.value.trim(),email:(k=I.current)==null?void 0:k.value.trim(),mobile:(J=$.current)==null?void 0:J.value.trim(),password:(K=M.current)==null?void 0:K.value,password_confirmation:(j=_.current)==null?void 0:j.value,type:(c=z.current)==null?void 0:c.value,company_id:(L=U.current)==null?void 0:L.value};u===2&&((R=f.current)!=null&&R.value)&&(r.payment_per_hour=f.current.value),u===4&&((b=f.current)!=null&&b.value)&&(r.payment_per_hour=f.current.value),(Ze=E.current)!=null&&Ze.value&&(r.address=E.current.value.trim());try{const q=await zs(r);if(q.id){const T=q.id||((Ge=q.data)==null?void 0:Ge.id);if(O.length>0&&T)for(const F of O){const N=d.find(A=>A.id===parseInt(F));if(N){const A=Array.isArray(N.operator_id)?[...new Set([...N.operator_id.map(String),String(T)])]:[String(T)];await V(`/api/machine-operators/${F}`,{operator_id:A})}}if(Ne.length>0&&T)for(const F of Ne){const N=os.find(A=>A.id===parseInt(F));if(N){const A=Array.isArray(N.operator_id)?[...new Set([...N.operator_id.map(String),String(T)])]:[String(T)];await V(`/api/projects/${F}`,{operator_id:A})}}const _s=r.type==="2";n("success",_s?"New operator created and assigned successfully":"New supervisor created successfully"),r.type==="4"&&n("success","New Helper created successfully"),je(),W(),ye(),qe()}else n("danger","Error occurred, please try again later.")}catch(q){n("danger",q.message)}},As=s=>{P(s),B(!0),Y({adds:[],removes:[]})},Ps=s=>{if(!s||!t)return;const a=d.find(i=>i.id===parseInt(s));if(!a)return;if(Array.isArray(a.operator_id)&&a.operator_id.map(String).includes(String(t.id))){n("warning","Machine already assigned");return}Y(i=>({...i,adds:[...new Set([...i.adds,s])],removes:i.removes.filter(k=>k!==s)}))},Is=/^[6-9]\d{9}$/,Ms=async()=>{var a;if(!t)return;const s=((a=t.mobile)==null?void 0:a.replace(/\D/g,""))??"";if(!Is.test(s)){n("danger","Please enter a valid 10-digit mobile number starting with 6, 7, 8 or 9.");return}try{const r={id:t.id,name:t.name,email:t.email,mobile:s,type:t.type,company_id:t.company_id||w.company_id,company_id:t.company_id||w.company_id,blocked:t.blocked??0};t.type===2&&t.payment&&(r.payment_per_hour=t.payment),t.type===4&&t.payment&&(r.payment_per_hour=t.payment);const i=await V(`/api/userUpdated/${t.id}`,r);if(!(i!=null&&i.success)){n("danger",(i==null?void 0:i.message)||"Update failed");return}const k=g.adds.map(async j=>{const c=d.find(b=>b.id===parseInt(j));if(!c)return;const L=Array.isArray(c.operator_id)?c.operator_id.map(String):[],R=[...new Set([...L,String(t.id)])];await V(`/api/machine-operators/${j}`,{operator_id:R})}),J=g.removes.map(async j=>{const c=d.find(b=>b.id===parseInt(j));if(!c)return;const R=(Array.isArray(c.operator_id)?c.operator_id.map(String):[]).filter(b=>b!==String(t.id));await V(`/api/machine-operators/${j}`,{operator_id:R})});await Promise.all([...k,...J]);const K=t.type===0?"Super Admin":t.type===1?"Admin":t.type===4?"Helper":"Operator";n("success",`${K} updated successfully`),B(!1),Y({adds:[],removes:[]}),await Promise.all([W(),ye()])}catch(r){console.error("Error in handleUpdate:",r),n("danger",`Error updating operators: ${r.message}`)}},Ve=({children:s,maxLength:a=8})=>{const r=String(s||"").trim();if(r.length<=a)return e.jsx(e.Fragment,{children:r});const i=r.substring(0,a)+"...";return e.jsx(Js,{content:r,placement:"top",children:e.jsx("span",{style:{cursor:"pointer"},children:i})})};return fs?e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{minHeight:"400px"},children:[e.jsx(ks,{color:"primary",size:"lg"}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading Operators..."})]}):e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-column",children:[e.jsx(Rs,{children:e.jsx(Ts,{className:"justify-content-center",children:e.jsx(Os,{md:12,lg:12,xl:12,children:e.jsxs(Hs,{children:[e.jsxs(qs,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Operators List"}),e.jsx(S,{color:"danger",onClick:()=>Se(!0),className:"text-white",children:"Add New Operator"})]}),e.jsx(Ls,{children:e.jsx("div",{className:"table-responsive",style:{width:"100%",overflowX:"auto",overflowY:"auto",border:"1px solid #dee2e6",borderRadius:"8px",backgroundColor:"#fff"},children:e.jsxs(Fs,{hover:!0,striped:!0,bordered:!0,color:"light",className:"mb-0",children:[e.jsx(Vs,{style:{position:"sticky",top:0,backgroundColor:"#f8f9fa",zIndex:10},children:e.jsxs(Xe,{children:[e.jsx(h,{className:"text-center align-middle",children:"SR. NO."}),e.jsx(h,{className:"text-center align-middle",children:"Name"}),e.jsx(h,{className:"text-center align-middle",children:"Email"}),e.jsx(h,{className:"text-center align-middle",children:"Mobile"}),e.jsx(h,{className:"text-center align-middle",children:"Address"}),e.jsx(h,{className:"text-center align-middle",children:"Type"}),e.jsx(h,{className:"text-center align-middle",children:"Payment"}),e.jsx(h,{className:"text-center align-middle",children:"Machines"}),e.jsx(h,{className:"text-center align-middle",children:"Action"})]})}),e.jsx(Bs,{children:rs.map((s,a)=>{const r=d.filter(i=>Array.isArray(i.operator_id)&&i.operator_id.map(String).includes(String(s.id)));return console.log("User : ",s),e.jsxs(Xe,{children:[e.jsx(x,{children:a+1}),e.jsx(x,{children:s.name}),e.jsx(x,{children:e.jsx(Ve,{children:s.email})}),e.jsx(x,{children:s.mobile}),e.jsx(x,{children:s.address}),e.jsx(x,{children:s.type===0?"Super Admin":s.type===1?"Admin":s.type===2?"Operator":"Helper"}),e.jsx(x,{children:s.payment}),e.jsx(x,{children:e.jsx(Ve,{children:r.length>0?r.map(i=>i.machine_name).join(", "):"-"})}),e.jsxs(x,{className:"d-flex gap-2 justify-content-center",children:[e.jsx(S,{size:"sm",color:"info",className:"text-white",onClick:()=>As(s),children:"Edit"}),e.jsx(S,{color:"danger",size:"sm",onClick:()=>ws(s),children:"Delete"})]})]},s.id)})})]})})})]})})})}),e.jsxs(We,{visible:ts,onClose:je,backdrop:"static",keyboard:!1,size:"lg",children:[e.jsx(Je,{closeButton:!0,children:e.jsx(Ke,{children:"Add New Operator"})}),e.jsx(Qe,{children:e.jsxs(Ys,{noValidate:!0,validated:se,onSubmit:Fe,children:[e.jsxs(p,{className:"mb-4",children:[e.jsx(m,{children:e.jsx(C,{icon:Zs})}),e.jsx(ee,{onChange:s=>X(s,!0),"aria-label":"Select Shop / Company",ref:U,invalid:Re,options:is,feedbackInvalid:"Select Shop / Company",disabled:!0})]}),e.jsxs("div",{className:`d-flex ${u===2?"gap-3":""} mb-3 flex-wrap`,children:[e.jsx("div",{className:`${u===2?"flex-fill":"w-100"}`,children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:Gs})}),e.jsx(ee,{onChange:X,"aria-label":"Select user type",ref:z,invalid:Ee,options:H,feedbackInvalid:"Please select a valid option.",required:!0})]})}),u===2&&e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:ss})}),e.jsx(o,{ref:f,placeholder:"Add payment per Month",required:!0,invalid:fe,onChange:s=>{const a=s.target.value.replace(/\D/g,"");s.target.value=a,ge()},feedbackInvalid:De||"Please provide payment per month.",maxLength:"10"})]})}),u===4&&e.jsx("div",{className:"flex-fill mt-4",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:ss})}),e.jsx(o,{ref:f,placeholder:"Add payment per Month",required:!0,invalid:fe,onChange:s=>{const a=s.target.value.replace(/\D/g,"");s.target.value=a,ge()},feedbackInvalid:De||"Please provide payment per month.",maxLength:"10"})]})})]}),e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:Xs})}),e.jsx(o,{ref:D,type:"text",placeholder:"Name",required:!0,invalid:se&&!((Be=D.current)!=null&&Be.value),feedbackInvalid:"Please provide a valid supervisor name."})]})}),e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:"@"}),e.jsx(o,{ref:I,type:"email",placeholder:"Email",required:!0,invalid:se&&(Ie||!((Ye=I.current)!=null&&Ye.value)),onChange:ze,feedbackInvalid:hs||"Please provide a valid email."})]})})]}),e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:Ws})}),e.jsx(o,{ref:$,placeholder:"Mobile (10 digits)",required:!0,invalid:_e,onChange:s=>{const a=s.target.value.replace(/\D/g,"");s.target.value=a,Ue()},feedbackInvalid:xs||"Please provide a valid mobile number.",maxLength:"10"})]})}),e.jsx("div",{className:"flex-fill",children:e.jsxs(p,{children:[e.jsx(m,{children:"ðŸ“"}),e.jsx(o,{ref:E,placeholder:"Address",required:!0,invalid:$e,onChange:He,feedbackInvalid:ys||"Please provide address."})]})})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 mb-3",children:[e.jsxs("div",{className:"flex-fill",style:{position:"relative"},children:[e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:as})}),e.jsx(o,{type:Z?"text":"password",ref:M,placeholder:"Enter New Password",required:!0,onChange:Le,autoComplete:"new-password",style:{paddingRight:"45px",border:ie?"1px solid #dc3545":void 0}}),e.jsx("div",{onClick:()=>Ae(!Z),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",fontSize:"18px",color:"#6c757d",zIndex:10,userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px"},title:Z?"Hide password":"Show password",children:Z?"ðŸ™ˆ":"ðŸ‘ï¸"})]}),ie&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:gs||"Please provide a valid password."})]}),e.jsxs("div",{className:"flex-fill",style:{position:"relative"},children:[e.jsxs(p,{children:[e.jsx(m,{children:e.jsx(C,{icon:as})}),e.jsx(o,{type:G?"text":"password",ref:_,placeholder:"Confirm Password",required:!0,onChange:ve,autoComplete:"new-password",style:{paddingRight:"45px",border:oe?"1px solid #dc3545":void 0}}),e.jsx("div",{onClick:()=>Pe(!G),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",fontSize:"18px",color:"#6c757d",zIndex:10,userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px"},title:G?"Hide password":"Show password",children:G?"ðŸ™ˆ":"ðŸ‘ï¸"})]}),oe&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:vs||"Please confirm your password."})]})]}),u===2&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Assign Machines (Optional)"})}),e.jsx("div",{className:"p-2 border rounded bg-light",children:d.length>0?d.map(s=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`machine-${s.id}`,value:s.id,checked:O.includes(String(s.id)),onChange:a=>{const r=a.target.value;a.target.checked?ae([...O,r]):ae(O.filter(i=>i!==r))}}),e.jsx("label",{className:"form-check-label",htmlFor:`machine-${s.id}`,children:s.machine_name})]},s.id)):e.jsx("div",{children:"No machines available"})})]})]})}),e.jsxs(es,{children:[e.jsx(S,{color:"secondary",onClick:je,children:"Cancel"}),e.jsx(S,{color:"success",onClick:Fe,children:"Save"})]})]}),e.jsxs(We,{visible:ls,onClose:()=>B(!1),size:"lg",children:[e.jsx(Je,{children:e.jsxs(Ke,{children:["Edit ",t?t.type===0?"Super Admin":t.type===1?"Admin":t.type===4?"Helper":"Operator":"Operator"]})}),e.jsx(Qe,{children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsx(o,{label:"Name",value:t.name,onChange:s=>P({...t,name:s.target.value})})}),e.jsx("div",{className:"flex-fill",children:e.jsx(o,{label:"Email",value:t.email,onChange:s=>P({...t,email:s.target.value})})})]}),e.jsxs("div",{className:"d-flex gap-3 mb-3",children:[e.jsx("div",{className:"flex-fill",children:e.jsx(o,{label:"Mobile",value:t.mobile,onChange:s=>P({...t,mobile:s.target.value}),maxLength:10,pattern:"[6-9]\\d{9}",title:"Mobile number must be exactly 10 digits and start with 6, 7, 8, or 9",invalid:t.mobile&&!/^[6-9]\d{9}$/.test(t.mobile.replace(/\D/g,""))})}),e.jsx("div",{className:"flex-fill",children:e.jsx(ee,{label:"Type",value:t.type,onChange:s=>P({...t,type:parseInt(s.target.value)}),options:H})})]}),[2,4].includes(parseInt(t.type))&&e.jsx("div",{className:"mb-3",children:e.jsx(o,{label:"Payment per Month",value:t.payment||"",onChange:s=>{const a=s.target.value.replace(/\D/g,"");P({...t,payment:a})},placeholder:"Enter payment amount"})}),t.type===2&&e.jsxs("div",{className:"mb-2 position-relative",children:[e.jsx("span",{style:{position:"relative",top:"10px",left:"0",backgroundColor:"white",paddingRight:"8px",color:"#0d6efd",fontWeight:"600"},children:"Machine"}),e.jsx("hr",{style:{marginTop:"0.5rem",border:"none",borderTop:"2px solid #0d6efd"}})]}),t.type===2&&e.jsxs(ee,{className:"mb-3",label:"Add Machine",value:"",onChange:s=>{Ps(s.target.value),s.target.value=""},children:[e.jsx("option",{value:"",children:"-- Select Machine --"}),d.map(s=>{const a=Array.isArray(s.operator_id)&&s.operator_id.map(String).includes(String(t.id)),r=g.adds.includes(String(s.id)),i=a||r;return e.jsxs("option",{value:s.id,disabled:i,children:[s.machine_name," ",i]},s.id)})]}),t.type===2&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Allocated Machines"})}),e.jsxs("div",{className:"p-2 border rounded bg-light",style:{maxHeight:"250px",overflowY:"auto"},children:[d.filter(s=>{const a=Array.isArray(s.operator_id)&&s.operator_id.map(String).includes(String(t.id)),r=g.adds.includes(String(s.id)),i=g.removes.includes(String(s.id));return(a||r)&&!i}).map(s=>{const a=g.adds.includes(String(s.id));return e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("span",{children:["â€¢ ",s.machine_name,a&&e.jsx("small",{className:"text-success ms-2"})]}),e.jsx(S,{color:"danger",size:"sm",onClick:()=>{Y(r=>({...r,removes:[...r.removes,String(s.id)],adds:r.adds.filter(i=>i!==String(s.id))}))},children:"Remove"})]},s.id)}),d.filter(s=>{const a=Array.isArray(s.operator_id)&&s.operator_id.map(String).includes(String(t.id)),r=g.adds.includes(String(s.id)),i=g.removes.includes(String(s.id));return(a||r)&&!i}).length===0&&e.jsx("div",{className:"text-muted",children:"No machines allocated"})]})]})]})}),e.jsxs(es,{children:[e.jsx(S,{color:"secondary",onClick:()=>B(!1),children:"Close"}),e.jsx(S,{color:"success",onClick:Ms,children:"Save Changes"})]})]}),e.jsx(Us,{visible:ps,setVisible:re,onYes:Ns,resource:"Delete Operator",message:"Do you want to delete this Operator?"})]})};export{Sa as default};
