import{c as g,r as l,b,u as y,j as e}from"./index-Cn-27-TL.js";import{a as v,b as E}from"./api-BUyL__Lx.js";import{a as N,b as w,d as T}from"./index.esm-2RRpQEeO.js";import{C as k,a as F}from"./CCardBody-Bfh-O-BQ.js";import{C as S}from"./CCardHeader-DyQDv_BY.js";import{C as P}from"./CForm-D5S3-WLx.js";import{C as i}from"./CFormLabel-CFBomnnz.js";import{C as m}from"./CFormInput-CL8d5WGe.js";import{C as I}from"./CFormTextarea-DOUqY1aU.js";import{C as D}from"./CFormCheck-Drk7w5bS.js";import"./CFormControlWrapper-CPiMjLs0.js";import"./CFormControlValidation-BvfkKe2L.js";const K=()=>{const p=g(),[h,u]=l.useState(!1),{showToast:n}=b(),x=y(),[r,c]=l.useState({id:0,name:"",slug:"",localName:"",show:!0,desc:""}),d=a=>{const{name:t,value:s}=a.target;c({...r,[t]:s})},C=a=>{const{name:t,checked:s}=a.target;c({...r,[t]:s})},j=async()=>{try{const a=await v("/api/expenseType/"+p.id);c({id:a.id,name:a.name,localName:a.localName,slug:a.slug,show:a.show==1,desc:a.desc})}catch(a){n("danger","Error occured "+a)}};l.useEffect(()=>{j()},[]);const f=async a=>{const t=a.currentTarget;if(a.preventDefault(),a.stopPropagation(),u(!0),t.checkValidity()!==!0)return;let s={...r};s.slug=s.name.replace(/[^\w]/g,"_");try{const o=await E("/api/expenseType/"+s.id,s);o!=null&&o.id?(n("success","ExpenseType updated successfully"),x("/expense/all-type")):n("danger","Error occured, please try again later.")}catch(o){n("danger","Error occured "+o)}};return e.jsx(N,{children:e.jsx(w,{xs:12,children:e.jsxs(k,{className:"mb-4",children:[e.jsx(S,{children:e.jsx("strong",{children:e.jsx("b",{children:"Edit ExpenseType"})})}),e.jsx(F,{children:e.jsxs(P,{noValidate:!0,validated:h,onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"pname",children:e.jsx("b",{children:"ExpenseType Name"})}),e.jsx(m,{type:"text",id:"pname",placeholder:"Expense Name",name:"name",value:r.name,onChange:d,required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"pname",children:e.jsx("b",{children:"ExpenseType Local Name"})}),e.jsx(m,{type:"text",id:"plname",placeholder:"Expense Name",name:"localName",value:r.localName,onChange:d,required:!0,feedbackInvalid:"Please provide local name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"desc",children:e.jsx("b",{children:"Short Description"})}),e.jsx(I,{id:"desc",rows:3,name:"desc",value:r.desc,onChange:d,required:!0,feedbackInvalid:"Please provide description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(D,{id:"flexCheckDefault",label:"Show for expense records",name:"show",checked:r.show,onChange:C})}),e.jsx("div",{className:"mb-3",children:e.jsx(T,{color:"success",type:"submit",children:"Update"})})]})})]})})})};export{K as default};
